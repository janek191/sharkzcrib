<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SharkzCrib - Krypto Chartanalysen</title>
    <link rel="icon" type="image/png" href="sharkzcrib_logo.PNG">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #000000 0%, #111111 50%, #1a1a1a 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header und Logo */
        .header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50px;
            right: -50px;
            width: 200px;
            height: 200px;
            background: url('sharkzcrib_logo.PNG') center/contain no-repeat;
            opacity: 0.03;
            transform: rotate(15deg);
            pointer-events: none;
        }

        .logo {
            margin-bottom: 20px;
        }

        /* Floating Logo */
        .floating-logo {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .floating-logo-image {
            width: 50px;
            height: 50px;
            object-fit: contain;
            filter: drop-shadow(0 4px 8px rgba(0, 255, 136, 0.3));
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            padding: 5px;
            backdrop-filter: blur(10px);
        }

        .floating-logo:hover .floating-logo-image {
            transform: scale(1.1);
            filter: drop-shadow(0 6px 12px rgba(0, 255, 136, 0.5));
        }

        .logo-main {
            font-family: 'Courier New', monospace;
            font-size: 3.5rem;
            font-weight: bold;
            color: #ffffff;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
            letter-spacing: 2px;
            margin-bottom: 10px;
        }

        .logo-sub {
            font-size: 1.2rem;
            color: #cccccc;
            letter-spacing: 8px;
            font-weight: 300;
        }

        .tagline {
            font-size: 1.1rem;
            color: #cccccc;
            margin-top: 15px;
            font-style: normal;
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 5px;
            backdrop-filter: blur(10px);
        }

        .nav-tab {
            padding: 15px 30px;
            margin: 0 5px;
            background: transparent;
            border: none;
            color: #cccccc;
            cursor: pointer;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }

        .nav-tab:hover::before {
            left: 100%;
        }

        .nav-tab:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            transform: translateY(-2px);
        }

        .nav-tab.active {
            background: linear-gradient(135deg, #ffffff, #f0f0f0);
            color: #000000;
            box-shadow: 0 5px 20px rgba(255, 255, 255, 0.2);
        }

        /* Analysis Navigation */
        .analysis-navigation {
            display: flex;
            flex-direction: column;
            gap: 0;
            margin-bottom: 20px;
            padding: 0;
            background: transparent;
            border-radius: 0;
        }

        .analysis-nav-group {
            display: none;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        .analysis-nav-group.show {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .nav-group-title {
            font-size: 0.9rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
            padding-left: 10px;
        }

        .nav-group-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .analysis-nav-btn {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: rgba(26, 26, 26, 1);
            border: 1px solid transparent;
            border-radius: 12px;
            color: #ffffff;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            min-height: 60px;
            width: 100%;
            position: relative;
        }

        .analysis-nav-btn:hover {
            background: rgba(38, 38, 38, 1);
        }

        .analysis-nav-btn.active {
            background: rgba(26, 26, 26, 1);
            border: 1px solid #00ff88;
            box-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
        }

        .analysis-nav-btn.active::before {
            content: '';
            position: absolute;
            top: -1px;
            left: -1px;
            right: -1px;
            bottom: -1px;
            border-radius: 12px;
            border: 1px solid #00ff88;
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.2);
            animation: glowing 2s ease-in-out infinite;
        }

        @keyframes glowing {
            0% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
            100% {
                opacity: 1;
            }
        }

        .nav-btn-icon {
            font-size: 20px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-btn-content {
            flex-grow: 1;
        }

        .nav-btn-title {
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 4px;
            color: #ffffff;
        }

        .nav-btn-subtitle {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.5);
        }



        /* Content Areas */
        .content-area {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .content-area.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* News Sections */
        .news-sections-toggle {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }

        .section-toggle-btn {
            padding: 15px 40px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            color: #ffffff;
            border-radius: 15px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 500;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            min-width: 200px;
        }

        .section-toggle-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .section-toggle-btn.active {
            background: rgba(0, 255, 136, 0.1);
            border-color: #00ff88;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
        }

        .news-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .news-section.active {
            display: block;
        }

        /* News Filters */
        .news-filter {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .news-filter-btn {
            padding: 12px 24px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
            color: #ffffff;
            border-radius: 12px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .news-filter-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .news-filter-btn.active {
            background: rgba(0, 255, 136, 0.1);
            border-color: #00ff88;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
        }

        .news-loading {
            text-align: center;
            padding: 40px;
            color: #ffffff;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-left-color: #00ff88;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        .news-error {
            text-align: center;
            padding: 40px;
            color: #ff4757;
            background: rgba(255, 71, 87, 0.1);
            border-radius: 15px;
            margin: 20px;
            border: 1px solid rgba(255, 71, 87, 0.3);
        }

        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 20px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }

        .news-grid.loaded {
            opacity: 1;
            transform: translateY(0);
        }

        .news-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        .news-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.2);
            border-color: rgba(0, 212, 255, 0.3);
        }

        /* Breaking News Styling */
        .breaking-news {
            position: absolute;
            top: 10px;
            right: -30px;
            background: #ff4757;
            color: white;
            padding: 5px 40px;
            transform: rotate(45deg);
            font-size: 12px;
            font-weight: bold;
            box-shadow: 0 2px 10px rgba(255, 71, 87, 0.3);
        }

        /* News Importance Styling */
        .news-card.high {
            border-color: #ff4757;
            background: linear-gradient(135deg, rgba(255, 71, 87, 0.1), rgba(255, 255, 255, 0.05));
        }

        .news-card.medium {
            border-color: #ffa502;
            background: linear-gradient(135deg, rgba(255, 165, 2, 0.1), rgba(255, 255, 255, 0.05));
        }

        /* News Meta Information */
        .news-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .news-source-tag {
            background: rgba(255, 255, 255, 0.1);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            color: #00ff88;
        }

        /* News Footer */
        .news-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .read-more-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #00ff88;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .read-more-btn:hover {
            color: #ffffff;
            transform: translateX(5px);
        }

        /* Sentiment Indicator */
        .sentiment-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
            color: #cccccc;
        }

        .news-category {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-bottom: 15px;
            background: rgba(0, 255, 136, 0.1);
            color: #00ff88;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }

        .news-category.bitcoin { background: rgba(247, 147, 26, 0.1); color: #f7931a; border-color: rgba(247, 147, 26, 0.3); }
        .news-category.market { background: rgba(0, 212, 255, 0.1); color: #00d4ff; border-color: rgba(0, 212, 255, 0.3); }
        .news-category.regulation { background: rgba(255, 71, 87, 0.1); color: #ff4757; border-color: rgba(255, 71, 87, 0.3); }

        .news-date {
            color: #ffffff;
            font-size: 0.9rem;
            margin-bottom: 10px;
            opacity: 0.7;
        }

        .news-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #ffffff;
            font-weight: 600;
            line-height: 1.4;
        }

        .news-excerpt {
            color: #cccccc;
            line-height: 1.6;
            flex-grow: 1;
            margin-bottom: 15px;
        }

        .news-source {
            font-size: 0.8rem;
            color: #00ff88;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s ease;
        }

        .news-source:hover {
            color: #ffffff;
        }

        /* News Navigation */
        .news-navigation {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin: 20px 0;
        }

        .current-date {
            font-size: 1.2rem;
            color: #ffffff;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .nav-button-container {
            text-align: center;
            margin: 15px 0;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }

        .nav-button-container.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .nav-btn {
            padding: 12px 30px;
            background: rgba(0, 255, 136, 0.1);
            border: 2px solid rgba(0, 255, 136, 0.3);
            color: #00ff88;
            border-radius: 12px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(10px);
        }

        .nav-btn:hover {
            background: rgba(0, 255, 136, 0.2);
            transform: translateY(-2px);
        }

        .nav-btn .btn-icon {
            transition: transform 0.3s ease;
        }

        .newer-btn:hover .btn-icon {
            transform: translateY(-3px);
        }

        .older-btn:hover .btn-icon {
            transform: translateY(3px);
        }

        .nav-btn.loading {
            pointer-events: none;
            opacity: 0.7;
        }

        .nav-btn.loading .btn-icon {
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(5px); }
        }

        /* Analysis Section */
        .analysis-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 30px;
            margin-top: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        /* Altcoins Navigation */
        .altcoins-button-nav {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .altcoin-nav-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 10px 20px;
            color: #ffffff;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .altcoin-nav-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .altcoin-nav-btn.active {
            background: rgba(0, 255, 136, 0.1);
            border-color: rgba(0, 255, 136, 0.3);
        }

        .coin-icon {
            font-size: 1.2em;
        }

        .coin-name {
            font-weight: 500;
        }

        /* Chart Placeholder */
        .chart-placeholder {
            background: rgba(255, 255, 255, 0.02);
            border: 2px dashed rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 40px;
            margin: 20px 0;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .placeholder-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .placeholder-icon {
            font-size: 48px;
            opacity: 0.5;
        }

        .placeholder-text {
            font-size: 18px;
            color: rgba(255, 255, 255, 0.6);
        }

        /* TradingView Chart Container */
        .chart-container {
            background: rgba(26, 26, 26, 1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .screenshot-view {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .screenshot-img {
            width: 100%;
            height: auto;
            max-height: 600px;
            object-fit: contain;
            border-radius: 10px;
        }

        /* Telegram Container */
        .telegram-container {
            background: rgba(26, 26, 26, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
        }

        .telegram-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .channel-info {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .channel-avatar {
            width: 80px;
            height: 80px;
        }

        .channel-logo {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 50%;
            box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3);
            background: rgba(255, 255, 255, 0.05);
            padding: 8px;
        }

        .channel-details h2 {
            font-size: 28px;
            color: #ffffff;
            margin-bottom: 8px;
        }

        .channel-description {
            color: rgba(255, 255, 255, 0.7);
            font-size: 16px;
            margin: 0;
        }

        .telegram-content {
            position: relative;
        }

        .telegram-loading {
            text-align: center;
            padding: 40px;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top: 3px solid #00ff88;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
            position: relative;
        }

        .loading-spinner::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            background: url('sharkzcrib_logo.PNG') center/contain no-repeat;
            opacity: 0.3;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .telegram-loading p {
            color: rgba(255, 255, 255, 0.6);
            font-size: 16px;
        }

        .channel-stats {
            display: flex;
            flex-direction: column;
            gap: 25px;
            margin-bottom: 30px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .stat-icon {
            font-size: 32px;
            width: 60px;
            height: 60px;
            background: rgba(0, 255, 136, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .stat-content {
            flex: 1;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .stat-value.positive {
            color: #00ff88;
        }

        .stat-value.negative {
            color: #ff4757;
        }

        .stat-value.neutral {
            color: #ffa502;
        }

        .stat-label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 16px;
            line-height: 1.4;
        }

        .telegram-error {
            text-align: center;
            padding: 40px;
        }

        .error-icon {
            font-size: 48px;
            margin-bottom: 20px;
        }

        .telegram-error p {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 20px;
        }

        .retry-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 10px 20px;
            color: #ffffff;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .retry-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .telegram-join {
            text-align: center;
            margin-top: 30px;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .join-channel-btn {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            background: linear-gradient(135deg, #00ff88, #00ccff);
            color: #000;
            text-decoration: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3);
        }

        .join-channel-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 255, 136, 0.4);
        }

        .btn-arrow {
            font-size: 18px;
            transition: transform 0.3s ease;
        }

        .join-channel-btn:hover .btn-arrow {
            transform: translateX(5px);
        }

        /* Trading Levels Info */
        .trading-levels-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
            padding: 30px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .level-item {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            text-align: left;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .level-item:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.05);
        }

        .level-icon {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .level-label {
            font-size: 0.9rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .level-value {
            font-size: 1.4rem;
            font-weight: 600;
            margin: 5px 0;
        }

        .level-description {
            font-size: 0.9rem;
            color: #aaa;
            line-height: 1.4;
            margin-top: 5px;
        }

        .level-item.resistance {
            border-color: rgba(255, 71, 87, 0.3);
        }
        .level-item.resistance .level-value {
            color: #ff4757;
        }

        .level-item.support {
            border-color: rgba(0, 255, 136, 0.3);
        }
        .level-item.support .level-value {
            color: #00ff88;
        }

        .level-item.critical {
            border-color: rgba(255, 165, 2, 0.3);
        }
        .level-item.critical .level-value {
            color: #ffa502;
        }

        .level-item.target {
            border-color: rgba(0, 136, 255, 0.3);
        }
        .level-item.target .level-value {
            color: #0088ff;
        }

        /* Gleiche Button-Größen */
        .analysis-nav-btn {
            min-height: 80px;
        }

        .chart-toggle-btn {
            min-width: 200px;
            min-height: 60px;
        }

        .chart-toggle-btn.active {
            background: rgba(0, 255, 136, 0.1);
            border-color: #00ff88;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
        }

        .tradingview-widget-container {
            width: 100%;
            height: 600px;
            display: none;
        }

        #tradingview_btc_chart {
            width: 100%;
            height: 100%;
        }

        #tradingview_btc_chart,
        #tradingview_altcoins_chart {
            width: 100%;
            height: 500px;
            border-radius: 10px;
            overflow: hidden;
        }

        .chart-placeholder {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(200, 200, 200, 0.05));
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
        }

        .chart-placeholder::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.05), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .chart-text {
            font-size: 1.5rem;
            color: #ffffff;
            text-align: center;
            z-index: 1;
            position: relative;
        }

        .analysis-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-3px);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #ffffff;
            margin-bottom: 8px;
        }

        .stat-label {
            color: #cccccc;
            font-size: 0.9rem;
        }

        /* Trend Indicators */
        .trend-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin: 5px auto 0;
            transition: all 0.3s ease;
        }

        .trend-bullish {
            background: #00ff88;
            box-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
        }

        .trend-bearish {
            background: #ff4757;
            box-shadow: 0 0 10px rgba(255, 71, 87, 0.5);
        }

        .trend-neutral {
            background: #ffa502;
            box-shadow: 0 0 10px rgba(255, 165, 2, 0.5);
        }

        /* Chart Slider Styling */
        .chart-slider-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .chart-slider-container {
            margin-bottom: 25px;
        }

        .chart-slider {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            overflow-x: auto;
            padding: 10px 0;
        }

        .chart-slide {
            flex: 1;
            min-width: 120px;
            text-align: center;
            padding: 15px 10px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .chart-slide:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .chart-slide.active {
            border-color: #00ff88;
            background: rgba(0, 255, 136, 0.1);
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
        }

        .chart-slide-title {
            font-size: 16px;
            font-weight: bold;
            color: #ffffff;
            margin-bottom: 5px;
        }

        .chart-slide-desc {
            font-size: 11px;
            color: #cccccc;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .chart-explanation {
            position: relative;
            min-height: 150px;
        }

        /* Chart Annotations Section Styling */
        .chart-annotations-section {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .annotations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .annotation-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }

        .annotation-card:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .annotation-icon {
            font-size: 2rem;
            flex-shrink: 0;
            margin-top: 5px;
        }

        .annotation-content h4 {
            color: #ffffff;
            margin-bottom: 10px;
            font-size: 16px;
        }

        .annotation-content p {
            color: #cccccc;
            line-height: 1.6;
            font-size: 14px;
            margin: 0;
        }

        .explanation-content {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .explanation-content.active {
            display: block;
        }

        .explanation-content h4 {
            color: #ffffff;
            margin-bottom: 15px;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .explanation-content p {
            color: #cccccc;
            line-height: 1.6;
            font-size: 14px;
            margin: 0;
        }

        /* Support/Resistance Linien Styling */
        .support-resistance-line {
            position: absolute !important;
            left: 0 !important;
            right: 0 !important;
            height: 1px !important;
            z-index: 9999 !important;
            pointer-events: none !important;
            animation: fadeIn 0.5s ease-in !important;
            background: currentColor !important;
            box-shadow: 0 0 6px currentColor !important;
        }

        .support-resistance-line div {
            position: absolute !important;
            right: 20px !important;
            top: -25px !important;
            padding: 6px 10px !important;
            border-radius: 6px !important;
            font-size: 11px !important;
            font-weight: bold !important;
            color: currentColor !important;
            white-space: nowrap !important;
            background: rgba(0, 0, 0, 0.85) !important;
            border: 1px solid currentColor !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
        }

        /* Loading State für Stats */
        .stat-value.loading {
            position: relative;
            color: transparent;
        }

        .stat-value.loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #ffffff;
            animation: spin 1s linear infinite;
        }

        /* Login/Register Modal Styles */
        .auth-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10000;
            backdrop-filter: blur(10px);
        }

        .auth-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .auth-container {
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            border-radius: 20px;
            padding: 40px;
            max-width: 400px;
            width: 90%;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            position: relative;
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .auth-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .auth-title {
            font-size: 2rem;
            color: #ffffff;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .auth-subtitle {
            color: #cccccc;
            font-size: 1rem;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-group {
            position: relative;
        }

        .form-input {
            width: 100%;
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            color: #ffffff;
            font-size: 16px;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        .form-input:focus {
            outline: none;
            border-color: #00ff88;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
            background: rgba(255, 255, 255, 0.08);
        }

        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .auth-btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #00ff88, #00ccff);
            border: none;
            border-radius: 12px;
            color: #000;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .auth-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 255, 136, 0.4);
        }

        .auth-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .auth-toggle {
            text-align: center;
            margin-top: 20px;
            color: #cccccc;
        }

        .auth-toggle-btn {
            background: none;
            border: none;
            color: #00ff88;
            cursor: pointer;
            text-decoration: underline;
            font-size: 14px;
        }

        .auth-toggle-btn:hover {
            color: #ffffff;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: #cccccc;
            font-size: 24px;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close-modal:hover {
            color: #ffffff;
        }

        .auth-error {
            background: rgba(255, 71, 87, 0.1);
            border: 1px solid rgba(255, 71, 87, 0.3);
            color: #ff4757;
            padding: 12px;
            border-radius: 8px;
            font-size: 14px;
            text-align: center;
            display: none;
        }

        .auth-success {
            background: rgba(0, 255, 136, 0.1);
            border: 1px solid rgba(0, 255, 136, 0.3);
            color: #00ff88;
            padding: 12px;
            border-radius: 8px;
            font-size: 14px;
            text-align: center;
            display: none;
        }

        /* Konto Button - Einheitliches Design */
        .account-button-container {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .account-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            color: #ffffff;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            min-width: 120px;
            justify-content: center;
        }

        .account-btn:hover {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
            border-color: rgba(0, 255, 136, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 255, 136, 0.2);
        }

        .account-btn .btn-icon {
            font-size: 16px;
        }

        .account-btn .btn-text {
            font-weight: 500;
        }

        /* Dropdown Menu */
        .account-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 8px;
            background: linear-gradient(135deg, rgba(26, 26, 26, 0.95), rgba(38, 38, 38, 0.95));
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 8px 0;
            min-width: 200px;
            backdrop-filter: blur(15px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1001;
        }

        .account-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            color: #ffffff;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .dropdown-item:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #00ff88;
        }

        .dropdown-item:first-child {
            border-radius: 15px 15px 0 0;
        }

        .dropdown-item:last-child {
            border-radius: 0 0 15px 15px;
        }

        .dropdown-item.admin {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 4px;
            padding-top: 16px;
        }

        .dropdown-item.logout {
            color: #ff4757;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 4px;
            padding-top: 16px;
        }

        .dropdown-item.logout:hover {
            background: rgba(255, 71, 87, 0.1);
            color: #ff4757;
        }

        .dropdown-item .item-icon {
            font-size: 16px;
            width: 20px;
            text-align: center;
        }

        .dropdown-item .item-text {
            flex: 1;
        }

        /* Blur Overlay für Chartanalyse Content */
        .content-blur-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(8px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 100;
            border-radius: 20px;
            pointer-events: auto;
        }

        /* Container für das Overlay */
        .analysis-content-container {
            position: relative;
        }

        .content-blur-overlay.active {
            display: flex;
        }

        .blur-message {
            background: rgba(0, 0, 0, 0.9);
            color: #ffffff;
            padding: 30px 40px;
            border-radius: 15px;
            text-align: center;
            border: 2px solid #00ff88;
            box-shadow: 0 10px 30px rgba(0, 255, 136, 0.3);
            max-width: 400px;
        }

        .blur-message h3 {
            font-size: 24px;
            margin-bottom: 15px;
            color: #00ff88;
        }

        .blur-message p {
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 25px;
            color: #cccccc;
        }

        .blur-message .login-btn {
            background: linear-gradient(135deg, #00ff88, #00ccff);
            border: none;
            border-radius: 10px;
            color: #000;
            padding: 12px 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .blur-message .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 255, 136, 0.4);
        }



        /* Admin Panel Styles */
        .admin-controls {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-bottom: 25px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .admin-controls .auth-btn {
            padding: 12px 20px;
            font-size: 14px;
            min-height: 45px;
            border-radius: 10px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .admin-controls .auth-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }

        .admin-controls .auth-btn:hover::before {
            left: 100%;
        }

        .admin-controls .auth-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .user-count {
            color: #ffffff;
            font-size: 16px;
            font-weight: 500;
            text-align: center;
            padding: 10px;
            background: rgba(0, 255, 136, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(0, 255, 136, 0.3);
        }

        .firebase-status {
            color: #00ccff;
            font-size: 16px;
            font-weight: 500;
            text-align: center;
            padding: 10px;
            background: rgba(0, 204, 255, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(0, 204, 255, 0.3);
        }

        .admin-user-list {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.02);
            margin-bottom: 20px;
        }

        .admin-user-list::-webkit-scrollbar {
            width: 8px;
        }

        .admin-user-list::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        .admin-user-list::-webkit-scrollbar-thumb {
            background: rgba(0, 255, 136, 0.3);
            border-radius: 4px;
        }

        .admin-user-list::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 255, 136, 0.5);
        }

        .admin-user-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.03));
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .admin-user-item:hover {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.06));
            border-color: rgba(0, 255, 136, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .user-info {
            display: grid;
            grid-template-columns: 120px 200px 100px 100px;
            gap: 20px;
            align-items: center;
            flex: 1;
        }

        .user-info .username {
            font-weight: bold;
            color: #ffffff;
            font-size: 15px;
        }

        .user-info .email {
            color: #00ff88;
            font-size: 14px;
        }

        .user-info .role {
            color: #ffd700;
            font-size: 14px;
            text-align: center;
            padding: 4px 8px;
            background: rgba(255, 215, 0, 0.1);
            border-radius: 6px;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .user-info .status {
            color: #00ccff;
            font-size: 14px;
            text-align: center;
            padding: 4px 8px;
            background: rgba(0, 204, 255, 0.1);
            border-radius: 6px;
            border: 1px solid rgba(0, 204, 255, 0.3);
        }

        .delete-user-btn {
            background: rgba(255, 71, 87, 0.1);
            border: 1px solid rgba(255, 71, 87, 0.3);
            color: #ff4757;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            min-width: 60px;
        }

        .delete-user-btn:hover {
            background: rgba(255, 71, 87, 0.2);
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(255, 71, 87, 0.3);
        }

        .admin-actions {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .admin-actions .auth-btn {
            flex: 1;
            min-width: 150px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #ffffff;
        }

        .admin-actions .auth-btn:hover {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.08));
            border-color: rgba(0, 255, 136, 0.5);
        }

        /* Session-Warnung Animation */
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .admin-status {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .admin-status .user-count,
        .admin-status .firebase-status {
            flex: 1;
            max-width: 200px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .logo-main {
                font-size: 2.5rem;
            }
            
            .nav-tabs {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-tab {
                margin: 5px 0;
                width: 100%;
                max-width: 300px;
            }
            
            .sub-tabs {
                flex-direction: column;
                align-items: center;
            }
            
            .sub-tab {
                margin: 5px 0;
                width: 100%;
                max-width: 250px;
            }
            
            .news-grid {
                grid-template-columns: 1fr;
            }

            .auth-container {
                margin: 20px;
                padding: 30px;
            }

            .user-menu {
                position: static;
                justify-content: center;
                margin-bottom: 20px;
                padding: 10px 20px;
                border-radius: 20px;
            }

            .account-button-container {
                position: static;
                display: flex;
                justify-content: center;
                margin-bottom: 20px;
            }

            .user-info {
                flex-direction: column;
                gap: 8px;
                text-align: center;
            }

            .user-avatar {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #ffffff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Floating Elements */
        .floating-element {
            position: absolute;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.05) 0%, transparent 70%);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        .floating-element:nth-child(1) {
            top: 10%;
            left: 5%;
            animation-delay: 0s;
        }

        .floating-element:nth-child(2) {
            top: 60%;
            right: 10%;
            animation-delay: 2s;
        }

        .floating-element:nth-child(3) {
            bottom: 20%;
            left: 15%;
            animation-delay: 4s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        /* Gemeinsames Button Styling */
        .button-group {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 0 auto 30px;
        }

        .custom-btn {
            flex: 1;
            min-width: 160px;
            max-width: 200px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 0 20px;
            background: rgba(17, 17, 17, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #ffffff;
            border-radius: 10px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            backdrop-filter: blur(10px);
        }

        .custom-btn:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: translateY(-1px);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .custom-btn.active {
            background: rgba(0, 255, 136, 0.1);
            border-color: #00ff88;
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.2);
        }

        .custom-btn .btn-icon {
            font-size: 16px;
            opacity: 0.9;
        }

        /* Spezifische Button-Gruppen */
        .chart-toggle-buttons,
        .news-sections-toggle,
        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 0 auto 30px;
        }

        .chart-toggle-btn,
        .section-toggle-btn,
        .nav-tab {
            flex: 1;
            min-width: 160px;
            max-width: 200px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 0 20px;
            background: rgba(17, 17, 17, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #ffffff;
            border-radius: 10px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            backdrop-filter: blur(10px);
        }

        /* Chart Views Styling */
        .tradingview-widget-container,
        .screenshot-view {
            display: none;
            width: 100%;
            height: 500px;
            border-radius: 10px;
            overflow: hidden;
        }

        .tradingview-widget-container.active,
        .screenshot-view.active {
            display: block;
        }

        .screenshot-view img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 10px;
        }

        /* Analysis Sections Styling */
        .analysis-sections-container {
            margin-top: 40px;
        }

        .analysis-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .analysis-section.active {
            display: block;
        }

        .section-title {
            text-align: center;
            color: #ffffff;
            margin-bottom: 30px;
            font-size: 24px;
            font-weight: 500;
        }

        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            padding: 0 20px;
        }

        .analysis-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .analysis-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.2);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }

        .card-icon {
            font-size: 24px;
        }

        .card-header h4 {
            color: #ffffff;
            font-size: 18px;
            margin: 0;
        }

        .card-value {
            font-size: 24px;
            font-weight: bold;
            color: #00ff88;
            margin: 15px 0;
        }

        .card-description {
            color: #cccccc;
            line-height: 1.6;
            font-size: 14px;
            margin: 0;
        }

        .indicator-status {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin: 15px 0;
            font-size: 16px;
            color: #ffffff;
        }

        .ema-9 { color: #00ff88; }
        .ema-21 { color: #ff4757; }

        /* Spezifische Kartenfarben */
        .analysis-card.resistance .card-value { color: #ff4757; }
        .analysis-card.support-main .card-value { color: #ffa502; }
        .analysis-card.support-critical .card-value { color: #ff4757; }
        .analysis-card.target .card-value { color: #0088ff; }

        /* Chart Screenshot Slider Styling */
        .chart-screenshot-section {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .screenshot-slider-container {
            margin-bottom: 20px;
        }

        .screenshot-slider {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding: 10px 0;
        }

        .screenshot-slide {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-width: 120px;
            text-align: center;
            flex-shrink: 0;
        }

        .screenshot-slide:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .screenshot-slide.active {
            background: rgba(255, 255, 255, 0.1);
            border-color: #00ff88;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
        }

        .screenshot-title {
            color: #ffffff;
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 16px;
        }

        .screenshot-desc {
            color: #cccccc;
            font-size: 11px;
        }

        .screenshot-display {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-height: 400px;
            position: relative;
        }

        .screenshot-content {
            display: none;
            height: 100%;
        }

        .screenshot-content.active {
            display: block;
        }

        .screenshot-image-container {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .screenshot-placeholder {
            width: 100%;
            height: 350px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .screenshot-placeholder.main-chart {
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            border: 2px dashed #00ff88;
        }

        .screenshot-placeholder.resistance {
            background: linear-gradient(135deg, #2a1a1a 0%, #3a2a2a 100%);
            border: 2px solid #ff4444;
        }

        .screenshot-placeholder.support1 {
            background: linear-gradient(135deg, #1a2a1a 0%, #2a3a2a 100%);
            border: 2px solid #ffaa00;
        }

        .screenshot-placeholder.support2 {
            background: linear-gradient(135deg, #2a1a1a 0%, #3a2a2a 100%);
            border: 2px solid #ff4444;
        }

        .screenshot-placeholder.target {
            background: linear-gradient(135deg, #1a1a2a 0%, #2a2a3a 100%);
            border: 2px solid #0088ff;
        }

        .placeholder-content {
            text-align: center;
            color: #ffffff;
            padding: 20px;
        }

        .placeholder-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .placeholder-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #ffffff;
        }

        .placeholder-desc {
            font-size: 16px;
            color: #cccccc;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .placeholder-tip {
            font-size: 14px;
            color: #00ff88;
            font-style: italic;
            background: rgba(0, 255, 136, 0.1);
            padding: 10px;
            border-radius: 8px;
            border-left: 3px solid #00ff88;
        }

        .placeholder-details {
            margin-top: 20px;
            text-align: left;
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
        }

        .detail-item {
            color: #cccccc;
            margin-bottom: 8px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <!-- Floating Background Elements -->
    <div class="floating-element"></div>
    <div class="floating-element"></div>
    <div class="floating-element"></div>

    <div class="container">
        <!-- Header mit Logo -->
        <header class="header">
            <div class="logo">
                <div class="logo-main">sharkz</div>
                <div class="logo-sub">CRIB</div>
            </div>
            <div class="tagline">Professionelle Chartanalysen & Marktinsights für Krypto & Aktien</div>
        </header>
        
        <!-- Floating Logo -->
        <div class="floating-logo">
            <img src="sharkzcrib_logo.PNG" alt="SharkzCrib Logo" class="floating-logo-image">
        </div>

        <!-- Konto Button -->
        <div class="account-button-container">
            <button class="account-btn" id="accountBtn">
                <span class="btn-icon">👤</span>
                <span class="btn-text">Konto</span>
            </button>
        </div>

        <!-- Account Dropdown Menu -->
        <div class="account-dropdown" id="accountDropdown">
            <div class="dropdown-item" id="profileItem">
                <span class="item-icon">👤</span>
                <span class="item-text">Profil bearbeiten</span>
            </div>
            <div class="dropdown-item admin" id="adminItem" style="display: none;">
                <span class="item-icon">👑</span>
                <span class="item-text">Admin Panel</span>
            </div>
            <div class="dropdown-item logout" id="logoutItem">
                <span class="item-icon">🚪</span>
                <span class="item-text">Abmelden</span>
            </div>
        </div>

        <!-- Hauptnavigation -->
        <nav class="nav-tabs">
            <button class="nav-tab active" data-tab="news">📰 News & Updates</button>
            <button class="nav-tab" data-tab="analysis" id="analysisTab">📊 Chartanalysen</button>
            <button class="nav-tab" data-tab="telegram">📱 Telegram</button>
        </nav>

        <!-- Analysis Content -->
        <div class="content-area" id="analysis">
            <div class="analysis-navigation">
                <!-- Haupt-Navigation für Analysen -->
                <div class="analysis-nav-group">
                    <div class="nav-group-title">Markt auswählen</div>
                    <div class="nav-group-content">
                        <button class="analysis-nav-btn main active" data-maintab="crypto">
                            <div class="nav-btn-icon">💰</div>
                            <div class="nav-btn-content">
                                <div class="nav-btn-title">Krypto</div>
                                <div class="nav-btn-subtitle">Bitcoin & Altcoins</div>
                            </div>
                        </button>
                        <button class="analysis-nav-btn main" data-maintab="stocks">
                            <div class="nav-btn-icon">📈</div>
                            <div class="nav-btn-content">
                                <div class="nav-btn-title">Aktien</div>
                                <div class="nav-btn-subtitle">USA & China</div>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Sub-Navigation für Krypto -->
                <div class="analysis-nav-group crypto-nav show" id="cryptoNav">
                    <div class="nav-group-title">Krypto-Asset</div>
                    <div class="nav-group-content">
                        <button class="analysis-nav-btn sub active" data-subtab="bitcoin">
                            <div class="nav-btn-icon">₿</div>
                            <div class="nav-btn-content">
                                <div class="nav-btn-title">Bitcoin</div>
                                <div class="nav-btn-subtitle">BTC/USD</div>
                            </div>
                        </button>
                        <button class="analysis-nav-btn sub" data-subtab="altcoins">
                            <div class="nav-btn-icon">🪙</div>
                            <div class="nav-btn-content">
                                <div class="nav-btn-title">Altcoins</div>
                                <div class="nav-btn-subtitle">ETH, SOL, HBAR, FET, RNDR</div>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Altcoins Sub-Navigation -->
                <div class="analysis-nav-group altcoins-nav" id="altcoinsNav" style="display: none;">
                    <div class="nav-group-title">Altcoin auswählen</div>
                    <div class="nav-group-content">
                        <button class="analysis-nav-btn sub active" data-altcoin="ethereum">
                            <div class="nav-btn-icon">Ξ</div>
                            <div class="nav-btn-content">
                                <div class="nav-btn-title">Ethereum</div>
                                <div class="nav-btn-subtitle">ETH/USD</div>
                            </div>
                        </button>
                        <button class="analysis-nav-btn sub" data-altcoin="solana">
                            <div class="nav-btn-icon">◎</div>
                            <div class="nav-btn-content">
                                <div class="nav-btn-title">Solana</div>
                                <div class="nav-btn-subtitle">SOL/USD</div>
                            </div>
                        </button>
                        <button class="analysis-nav-btn sub" data-altcoin="hedera">
                            <div class="nav-btn-icon">ℏ</div>
                            <div class="nav-btn-content">
                                <div class="nav-btn-title">Hedera</div>
                                <div class="nav-btn-subtitle">HBAR/USD</div>
                            </div>
                        </button>
                        <button class="analysis-nav-btn sub" data-altcoin="fetch">
                            <div class="nav-btn-icon">🤖</div>
                            <div class="nav-btn-content">
                                <div class="nav-btn-title">Fetch.ai</div>
                                <div class="nav-btn-subtitle">FET/USD</div>
                            </div>
                        </button>
                        <button class="analysis-nav-btn sub" data-altcoin="render">
                            <div class="nav-btn-icon">🎨</div>
                            <div class="nav-btn-content">
                                <div class="nav-btn-title">Render</div>
                                <div class="nav-btn-subtitle">RNDR/USD</div>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Sub-Navigation für Aktien -->
                <div class="analysis-nav-group stocks-nav" id="stocksNav">
                    <div class="nav-group-title">Aktienmarkt</div>
                    <div class="nav-group-content">
                        <button class="analysis-nav-btn sub" data-subtab="usa">
                            <div class="nav-btn-icon">🇺🇸</div>
                            <div class="nav-btn-content">
                                <div class="nav-btn-title">USA</div>
                                <div class="nav-btn-subtitle">S&P 500, NASDAQ</div>
                            </div>
                        </button>
                        <button class="analysis-nav-btn sub" data-subtab="china">
                            <div class="nav-btn-icon">🇨🇳</div>
                            <div class="nav-btn-content">
                                <div class="nav-btn-title">China</div>
                                <div class="nav-btn-subtitle">SSE, SZSE</div>
                            </div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Container für den Inhalt mit Overlay -->
            <div class="analysis-content-container">
                <!-- Blur Overlay für nicht angemeldete Benutzer -->
                <div class="content-blur-overlay" id="analysisBlurOverlay">
                    <div class="blur-message">
                        <h3>🔒 Zugang gesperrt</h3>
                        <p>Um die Chartanalysen zu sehen, müssen Sie sich zuerst registrieren oder anmelden.</p>
                        <button class="login-btn" id="blurLoginBtn">Jetzt anmelden</button>
                    </div>
                </div>

                <!-- Chart Container -->
                <div class="chart-container bitcoin-container" style="display: block;">
                <!-- Chart Toggle Buttons -->
                <div class="button-group chart-toggle-buttons">
                    <button class="chart-toggle-btn active" data-view="screenshot">
                        <span class="btn-icon">📊</span>
                        <span class="btn-text">Technische Analyse</span>
                    </button>
                    <button class="chart-toggle-btn" data-view="live">
                        <span class="btn-icon">📈</span>
                        <span class="btn-text">Live Chart und Indikatoren</span>
                    </button>
                </div>
                
                <!-- TradingView Widget -->
                <div class="tradingview-widget-container" id="live-chart-view">
                    <div id="tradingview_btc_chart"></div>
                </div>
                
                <!-- Screenshot View -->
                <div class="screenshot-view active" id="screenshot-view">
                    <img src="BTC_1308.png" alt="Bitcoin Chart mit Trading-Niveaus" class="screenshot-img">
                </div>
            </div>

            <!-- Altcoins Container -->
            <div class="altcoins-container" style="display: none;">
                <!-- Altcoins Button Navigation -->
                <div class="altcoins-button-nav">
                    <button class="altcoin-nav-btn active" data-altcoin="ethereum">
                        <span class="coin-icon">Ξ</span>
                        <span class="coin-name">Ethereum</span>
                    </button>
                    <button class="altcoin-nav-btn" data-altcoin="solana">
                        <span class="coin-icon">◎</span>
                        <span class="coin-name">Solana</span>
                    </button>
                    <button class="altcoin-nav-btn" data-altcoin="hedera">
                        <span class="coin-icon">ℏ</span>
                        <span class="coin-name">Hedera</span>
                    </button>
                    <button class="altcoin-nav-btn" data-altcoin="fetch">
                        <span class="coin-icon">🤖</span>
                        <span class="coin-name">Fetch.ai</span>
                    </button>
                    <button class="altcoin-nav-btn" data-altcoin="render">
                        <span class="coin-icon">🎨</span>
                        <span class="coin-name">Render</span>
                    </button>
                </div>

                <!-- Altcoins Content -->
                <div class="altcoins-content">
                    <!-- Ethereum Section -->
                    <div class="altcoin-section ethereum-section active">
                        <h2 style="margin-bottom: 30px;">Ethereum (ETH) Analyse</h2>
                        <div class="chart-container">
                            <div class="screenshot-view active">
                                <img src="ETH_1308.png" alt="Ethereum Chart mit Trading-Niveaus" class="screenshot-img">
                            </div>
                        </div>
                        <div class="trading-levels-info">
                            <div class="level-item resistance">
                                <div class="level-icon">🔴</div>
                                <div class="level-label">WIDERSTAND</div>
                                <div class="level-value">4.860$</div>
                                <div class="level-description">Entscheidender Widerstand vor dem All-Time-High. Bullische Korrektivbewegung muss hier durchbrechen.</div>
                            </div>
                            <div class="level-item support">
                                <div class="level-icon">🟢</div>
                                <div class="level-label">AKTUELLE UNTERSTÜTZUNG</div>
                                <div class="level-value">4.100$</div>
                                <div class="level-description">Verhaltene Bewegung zwischen aktuellem Niveau und ATH. Wichtige Unterstützung für weitere Aufwärtsbewegung.</div>
                            </div>
                            <div class="level-item critical">
                                <div class="level-icon">⚠️</div>
                                <div class="level-label">KRITISCHE UNTERSTÜTZUNG</div>
                                <div class="level-value">3.400$</div>
                                <div class="level-description">Verlust dieses Levels würde bullische Struktur gefährden. Enge Stops setzen.</div>
                            </div>
                            <div class="level-item target">
                                <div class="level-icon">🎯</div>
                                <div class="level-label">ATH-ZIEL</div>
                                <div class="level-value">4.860$ → 5.200$</div>
                                <div class="level-description">Nach Durchbruch über 4.860$: Test des All-Time-Highs und darüber hinaus.</div>
                            </div>
                        </div>
                    </div>

                    <!-- Solana Section -->
                    <div class="altcoin-section solana-section" style="display: none;">
                        <h2 style="margin-bottom: 30px;">Solana (SOL) Analyse</h2>
                        <div class="chart-container">
                            <div class="screenshot-view active">
                                <img src="SOL_1308.png" alt="Solana Chart mit Trading-Niveaus" class="screenshot-img">
                            </div>
                        </div>
                        <div class="trading-levels-info">
                            <div class="level-item resistance">
                                <div class="level-icon">🔴</div>
                                <div class="level-label">WIDERSTAND</div>
                                <div class="level-value">180$</div>
                                <div class="level-description">Wichtiger Widerstand, der durchbrochen werden muss, um das All-Time-High zu testen.</div>
                            </div>
                            <div class="level-item support">
                                <div class="level-icon">🟢</div>
                                <div class="level-label">UNTERSTÜTZUNG</div>
                                <div class="level-value">140$</div>
                                <div class="level-description">Solide Unterstützung für bullische Aufwärtsbewegung. Niveaus müssen durchbrochen werden.</div>
                            </div>
                            <div class="level-item critical">
                                <div class="level-icon">⚠️</div>
                                <div class="level-label">KRITISCHE UNTERSTÜTZUNG</div>
                                <div class="level-value">120$</div>
                                <div class="level-description">Verlust dieses Levels würde bullische Struktur gefährden. Enge Stops setzen.</div>
                            </div>
                            <div class="level-item target">
                                <div class="level-icon">🎯</div>
                                <div class="level-label">ATH-TEST</div>
                                <div class="level-value">180$ → 200$+</div>
                                <div class="level-description">Nach Durchbruch der Widerstände: Test des All-Time-Highs und darüber hinaus.</div>
                            </div>
                        </div>
                    </div>

                    <!-- Hedera Section -->
                    <div class="altcoin-section hedera-section" style="display: none;">
                        <h2 style="margin-bottom: 30px;">Hedera (HBAR) Analyse</h2>
                        <div class="chart-container">
                            <div class="screenshot-view active">
                                <img src="HBAR_1308.png" alt="Hedera Chart mit Trading-Niveaus" class="screenshot-img">
                            </div>
                        </div>
                        <div class="trading-levels-info">
                            <div class="level-item resistance">
                                <div class="level-icon">🔴</div>
                                <div class="level-label">UNTERSTÜTZUNGSBEREICHE</div>
                                <div class="level-value">0.225$ & 0.178$</div>
                                <div class="level-description">Wichtige Unterstützungsbereiche, die nach unten nicht durchbrochen werden dürfen, um bullische Struktur zu erhalten.</div>
                            </div>
                            <div class="level-item support">
                                <div class="level-icon">🟢</div>
                                <div class="level-label">NÄCHSTES NIVEAU</div>
                                <div class="level-value">0.287$</div>
                                <div class="level-description">Langfristig halten. Wichtige Unterstützung für bullische Aufwärtsbewegung.</div>
                            </div>
                            <div class="level-item critical">
                                <div class="level-icon">⚠️</div>
                                <div class="level-label">KRITISCHE UNTERSTÜTZUNG</div>
                                <div class="level-value">0.178$</div>
                                <div class="level-description">Verlust dieses Levels würde bullische Struktur gefährden. Enge Stops setzen.</div>
                            </div>
                            <div class="level-item target">
                                <div class="level-icon">🎯</div>
                                <div class="level-label">HIGH TEST</div>
                                <div class="level-value">0.393$</div>
                                <div class="level-description">Nach Durchbruch der Widerstände: All-Time-High bei 0.393$ antesten und darüber hinaus expandieren.</div>
                            </div>
                        </div>
                    </div>

                    <!-- Fetch.ai Section -->
                    <div class="altcoin-section fetch-section" style="display: none;">
                        <h2 style="margin-bottom: 30px;">Fetch.ai (FET) Analyse</h2>
                        <div class="chart-container">
                            <div class="screenshot-view active">
                                <img src="FET_1308.png" alt="Fetch.ai Chart mit Trading-Niveaus" class="screenshot-img">
                            </div>
                        </div>
                        <div class="trading-levels-info">
                            <div class="level-item resistance">
                                <div class="level-icon">🔴</div>
                                <div class="level-label">KORREKTUR ABGESCHLOSSEN</div>
                                <div class="level-value">3-teilige Abwärtsbewegung</div>
                                <div class="level-description">3-teilige Abwärtsbewegung intern abgeschlossen. Bullische Struktur wiederhergestellt.</div>
                            </div>
                            <div class="level-item support">
                                <div class="level-icon">🟢</div>
                                <div class="level-label">UNTERSTÜTZUNG & STOP-LOSS</div>
                                <div class="level-value">0.711$</div>
                                <div class="level-description">Kritische Unterstützung, die gehalten werden muss, um bullische Aufwärtsbewegung zu bestätigen. Verlust dieses Levels würde bullische Struktur gefährden - enge Stops setzen.</div>
                            </div>
                            <div class="level-item target">
                                <div class="level-icon">🎯</div>
                                <div class="level-label">1$ ZIEL</div>
                                <div class="level-value">1.00$</div>
                                <div class="level-description">Nach Durchbruch der Widerstände: 1$-Niveau testen und darüber hinaus expandieren.</div>
                            </div>
                        </div>
                    </div>

                    <!-- Render Section -->
                    <div class="altcoin-section render-section" style="display: none;">
                        <h2 style="margin-bottom: 30px;">Render (RNDR) Analyse</h2>
                        <div class="chart-container">
                            <div class="screenshot-view active">
                                <img src="RENDER_1308.png" alt="Render Chart mit Trading-Niveaus" class="screenshot-img">
                            </div>
                        </div>
                        <div class="trading-levels-info">
                            <div class="level-item resistance">
                                <div class="level-icon">🔴</div>
                                <div class="level-label">ZIELZONE DURCHBRECHEN</div>
                                <div class="level-value">5.46$</div>
                                <div class="level-description">Aktuell noch in Zielzone, nach oben hin durchbrechen über 5.46$ erforderlich.</div>
                            </div>
                            <div class="level-item support">
                                <div class="level-icon">🟢</div>
                                <div class="level-label">UNTERSTÜTZUNG & STOP-LOSS</div>
                                <div class="level-value">2.50$</div>
                                <div class="level-description">Kritische Unterstützung, die nach unten hin gehalten werden muss, um bullische Struktur zu erhalten. Verlust dieses Levels würde bullische Struktur gefährden - enge Stops setzen.</div>
                            </div>
                            <div class="level-item target">
                                <div class="level-icon">🎯</div>
                                <div class="level-label">11.88$ ZIEL</div>
                                <div class="level-value">11.88$</div>
                                <div class="level-description">Bei bullischem Momentum: 11.88$-Niveau testen und darüber hinaus expandieren.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>



            <!-- Trading Info Container - nur für Bitcoin -->
            <div class="trading-info-container" id="bitcoin-trading-info" style="display: block;">
                <!-- Trading Levels Info (für Screenshot View) -->
                <div class="trading-levels-info" id="screenshot-info">
                    <div class="level-item resistance">
                        <div class="level-icon">🔴</div>
                        <div class="level-label">WIDERSTAND</div>
                        <div class="level-value">121.100$</div>
                        <div class="level-description">Starker Widerstandsbereich, mehrfach getestet. Ich gehe davon aus, dass der bullische Trend zunächst beendet wird.</div>
                    </div>
                    <div class="level-item support">
                        <div class="level-icon">🟠</div>
                        <div class="level-label">HAUPTUNTERSTÜTZUNG</div>
                        <div class="level-value">98.300$</div>
                        <div class="level-description">Wichtige erste Unterstützung. Ideal für neue Long-Positionen bei erfolgreichen Tests.</div>
                    </div>
                    <div class="level-item critical">
                        <div class="level-icon">⚠️</div>
                        <div class="level-label">KRITISCHE UNTERSTÜTZUNGEN</div>
                        <div class="level-value">78.250$ & 73.500$</div>
                        <div class="level-description">Verlust dieser Levels könnte größere Korrektur einleiten. Enge Stops setzen.</div>
                    </div>
                    <div class="level-item target">
                        <div class="level-icon">🎯</div>
                        <div class="level-label">ZIELBEREICH</div>
                        <div class="level-value">55.000$ - 76.377$</div>
                        <div class="level-description">Optimaler Bereich für neue Long-Positionen bei Korrekturen.</div>
                    </div>
                </div>

                <!-- Indicator Info (für Live Chart View) -->
                <div class="trading-levels-info" id="live-info" style="display: none;">
                    <div class="level-item resistance">
                        <div class="level-icon">📊</div>
                        <div class="level-label" style="font-size: 24px; font-weight: 600; margin-bottom: 15px; color: #ffffff;">MARKT SENTIMENT</div>
                        <div class="level-value positive">Bullish</div>
                        <div class="level-description">Technische Indikatoren zeigen überwiegend positive Signale. Momentum ist auf der Käuferseite.</div>
                    </div>

                    <div class="level-item support">
                        <div class="level-icon">📈</div>
                        <div class="level-label" style="font-size: 24px; font-weight: 600; margin-bottom: 15px; color: #ffffff;">MACD</div>
                        <div class="level-value positive">Bullish Crossover</div>
                        <div class="level-description">MACD über Signallinie: Positiver Momentum-Indikator zeigt starken Aufwärtstrend. MACD misst die Differenz zwischen zwei exponentiellen Moving Averages (12 und 26 Perioden).</div>
                    </div>

                    <div class="level-item critical">
                        <div class="level-icon">🔋</div>
                        <div class="level-label" style="font-size: 24px; font-weight: 600; margin-bottom: 15px; color: #ffffff;">RSI</div>
                        <div class="level-value neutral">67.5</div>
                        <div class="level-description">Neutraler Bereich mit bullischer Tendenz. RSI (Relative Strength Index) misst die Geschwindigkeit und Änderung von Preisbewegungen. Werte über 70 = überkauft, unter 30 = überverkauft.</div>
                    </div>

                    <div class="level-item target">
                        <div class="level-icon">〽️</div>
                        <div class="level-label" style="font-size: 24px; font-weight: 600; margin-bottom: 15px; color: #ffffff;">20 MA</div>
                        <div class="level-value positive">Unterstützung</div>
                        <div class="level-description">Preis über 20 MA: Bestätigt mittelfristigen Aufwärtstrend. 20-Perioden Moving Average zeigt die durchschnittliche Preisentwicklung der letzten 20 Perioden.</div>
                    </div>

                    <div class="level-item summary" style="grid-column: 1 / -1;">
                        <div class="level-icon">📝</div>
                        <div class="level-label">FAZIT</div>
                        <div class="level-value" style="font-size: 28px; margin: 15px 0;">Bullish</div>
                        <div class="level-description">Technische Indikatoren zeigen einen starken Aufwärtstrend. MACD über Signallinie bestätigt bullisches Momentum, RSI bei 67.5 zeigt noch Raum für weitere Anstiege, und 20 MA als Unterstützung bestätigt die bullische Struktur. Alle Signale deuten auf eine Fortsetzung des Aufwärtstrends hin.</div>
                    </div>
                </div>
                </div>
            </div>
        </div>

        <!-- News Content -->
        <div class="content-area" id="news">
            <h2 id="news-section-title">📰 Aktuelle Krypto-News</h2>
            
            <!-- News Sections Toggle -->
            <div class="news-sections-toggle">
                <button class="section-toggle-btn active" data-section="crypto">₿ Krypto</button>
                <button class="section-toggle-btn" data-section="stocks">📈 Aktien & Wirtschaft</button>
            </div>

            <!-- Crypto News Section -->
            <div class="news-section active" id="cryptoNews">
            </div>

            <!-- Stocks & Economy News Section -->
            <div class="news-section" id="stocksNews">
            </div>

            <!-- Navigation Buttons -->
            <div class="news-navigation">
                <!-- Newer News Button -->
                <div class="nav-button-container" id="newerNewsContainer">
                    <button class="nav-btn newer-btn" id="newerNewsBtn">
                        <span class="btn-icon">↑</span>
                        <span class="btn-text">Neuere News laden</span>
                    </button>
                </div>

                <!-- Current Date Display -->
                <div class="current-date" id="currentDateDisplay">
                    News vom <span id="currentNewsDate"></span>
                </div>
            </div>

            <!-- News Loading Indicator -->
            <div class="news-loading" id="newsLoading">
                <div class="loading-spinner"></div>
                <p>Lade aktuelle News...</p>
            </div>

            <!-- News Grid -->
            <div class="news-grid" id="newsGrid">
                <!-- News werden dynamisch eingefügt -->
            </div>

            <!-- Older News Button -->
            <div class="nav-button-container" id="olderNewsContainer">
                <button class="nav-btn older-btn" id="olderNewsBtn">
                    <span class="btn-text">Ältere News laden</span>
                    <span class="btn-icon">↓</span>
                </button>
            </div>

            <!-- News Error Message -->
            <div class="news-error" id="newsError" style="display: none;">
                <p>⚠️ Konnte keine News laden. Bitte später erneut versuchen.</p>
            </div>
        </div>

        <!-- Telegram Content -->
        <div class="content-area" id="telegram">
            <div class="telegram-container">
                <div class="telegram-header">
                    <div class="channel-info">
                        <div class="channel-avatar">
                            <img src="sharkzcrib_logo.PNG" alt="SharkzCrib Logo" class="channel-logo">
                        </div>
                        <div class="channel-details">
                            <h2>@SharkzCrib</h2>
                            <p class="channel-description">Bitcoin | Altcoins | Chartanalyse</p>
                        </div>
                    </div>
                </div>
                
                <div class="telegram-content">
                    <div class="telegram-loading" id="telegramLoading">
                        <div class="loading-spinner"></div>
                        <p>Lade Channel-Informationen...</p>
                    </div>
                    
                    <div class="channel-stats" id="channelStats" style="display: none;">
                        <div class="stat-item">
                            <div class="stat-icon">📊</div>
                            <div class="stat-content">
                                <div class="stat-value" id="analysesCount">--</div>
                                <div class="stat-label">Analysen in den letzten 30 Tagen</div>
                            </div>
                        </div>
                        
                        <div class="stat-item">
                            <div class="stat-icon">⚡</div>
                            <div class="stat-content">
                                <div class="stat-value">Live-Infos</div>
                                <div class="stat-label">bei wichtigen Niveaus und Breakouts</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="telegram-error" id="telegramError" style="display: none;">
                        <div class="error-icon">⚠️</div>
                        <p>Fehler beim Laden der Channel-Informationen</p>
                        <button class="retry-btn" onclick="loadTelegramChannelInfo()">Erneut versuchen</button>
                    </div>
                    
                    <div class="telegram-join">
                        <a href="https://t.me/SharkzCrib" target="_blank" class="join-channel-btn">
                            <span class="btn-icon">📱</span>
                            <span class="btn-text">Channel beitreten</span>
                            <span class="btn-arrow">→</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Login/Register Modal -->
    <div class="auth-modal" id="authModal">
        <div class="auth-container">
            <button class="close-modal" id="closeModal">&times;</button>
            
            <!-- Login Form -->
            <div id="loginForm">
                <div class="auth-header">
                    <h2 class="auth-title">Anmelden</h2>
                    <p class="auth-subtitle">Zugang zu Chartanalysen freischalten</p>
                </div>
                
                <div class="auth-error" id="loginError"></div>
                <div class="auth-success" id="loginSuccess"></div>
                
                <form class="auth-form" id="loginFormElement">
                    <div class="form-group">
                        <input type="text" class="form-input" id="loginUsername" placeholder="Benutzername" required>
                    </div>
                    <div class="form-group">
                        <input type="password" class="form-input" id="loginPassword" placeholder="Passwort" required>
                    </div>
                    <button type="submit" class="auth-btn" id="loginBtn">Anmelden</button>
                </form>
                
                <div class="auth-toggle">
                    <span>Noch kein Konto? </span>
                    <button class="auth-toggle-btn" id="showRegister">Registrieren</button>
                </div>
            </div>
            
            <!-- Register Form -->
            <div id="registerForm" style="display: none;">
                <div class="auth-header">
                    <h2 class="auth-title">Registrieren</h2>
                    <p class="auth-subtitle">Neues Konto erstellen</p>
                </div>
                
                <div class="auth-error" id="registerError"></div>
                <div class="auth-success" id="registerSuccess"></div>
                
                <form class="auth-form" id="registerFormElement">
                    <div class="form-group">
                        <input type="text" class="form-input" id="registerUsername" placeholder="Benutzername" required>
                    </div>
                    <div class="form-group">
                        <input type="email" class="form-input" id="registerEmail" placeholder="E-Mail" required>
                    </div>
                    <div class="form-group">
                        <input type="password" class="form-input" id="registerPassword" placeholder="Passwort" required>
                    </div>
                    <div class="form-group">
                        <input type="password" class="form-input" id="registerPasswordConfirm" placeholder="Passwort bestätigen" required>
                    </div>
                    <button type="submit" class="auth-btn" id="registerBtn">Registrieren</button>
                </form>
                
                <div class="auth-toggle">
                    <span>Bereits ein Konto? </span>
                    <button class="auth-toggle-btn" id="showLogin">Anmelden</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Panel Modal -->
    <div class="auth-modal" id="adminModal">
        <div class="auth-container" style="max-width: 800px;">
            <button class="close-modal" id="closeAdminModal">&times;</button>
            
            <div class="auth-header">
                <h2 class="auth-title">👑 Admin-Panel</h2>
                <p class="auth-subtitle">Benutzerverwaltung</p>
            </div>
            
            <div class="auth-error" id="adminError"></div>
            <div class="auth-success" id="adminSuccess"></div>
            
            <div class="admin-controls">
                <button class="auth-btn" onclick="exportCSV()">📥 CSV Exportieren</button>
                <button class="auth-btn" onclick="syncAllUsersToFirestore()" id="syncBtn" style="display: none;">🔄 Mit Cloud synchronisieren</button>
                <button class="auth-btn" onclick="openFirebaseConsole()">🌐 Firebase Console</button>
            </div>
            
            <div class="admin-status">
                <span class="user-count">Benutzer: <span id="userCount">0</span></span>
                <span class="firebase-status" id="firebaseStatus">🌐 Offline</span>
            </div>
            
            <div class="admin-user-list" id="adminUserList">
                <!-- Benutzer werden hier dynamisch eingefügt -->
            </div>
            
            <div class="admin-actions">
                <button class="auth-btn" onclick="refreshUserList()">🔄 Liste aktualisieren</button>
                <button class="auth-btn" onclick="showDatabaseStats()">📊 Datenbank-Statistiken</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>

    <!-- TradingView Widget Script -->
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // Standardmäßig News-Tab aktivieren
        const newsTab = document.querySelector('[data-tab="news"]');
        const newsContent = document.getElementById('news');
        
        if (newsTab && newsContent) {
            newsTab.classList.add('active');
            newsContent.classList.add('active');
        }
        
        // News initialisieren
        initializeNewsSection();
        
        // TradingView Widget initialisieren
        setTimeout(initTradingViewCharts, 1000);
        
        // Telegram-Content vorladen (falls Telegram-Tab aktiv ist)
        const telegramTab = document.querySelector('[data-tab="telegram"]');
        if (telegramTab && telegramTab.classList.contains('active')) {
            setTimeout(() => {
                loadTelegramChannelInfo();
            }, 200);
        }
    });

    // News-Funktionen
        const maxNewsPerDay = 10;
    let currentDate = new Date();
        let newsCache = {
        crypto: {},
            stocks: {}
        };
            // Cache aus localStorage laden
        function loadCache() {
            try {
            const savedCache = localStorage.getItem('newsCache');
            if (savedCache) {
                    Object.assign(newsCache, JSON.parse(savedCache));
            }
        } catch (error) {
            console.error('Fehler beim Laden des Cache:', error);
        }
        }
        loadCache();

        // News-Quellen und URLs
        const NEWS_SOURCES = ['CoinDesk', 'Cointelegraph', 'BTC-ECHO', 'Bitcoin.de', 'CryptoNews'];
        const NEWS_SOURCE_URLS = {
            'CoinDesk': 'https://www.coindesk.com',
            'Cointelegraph': 'https://cointelegraph.com',
            'BTC-ECHO': 'https://www.btc-echo.de',
            'Bitcoin.de': 'https://bitcoin.de',
            'CryptoNews': 'https://cryptonews.com'
        };

        // Zufällige News-Quelle auswählen
        function getRandomSource() {
            return NEWS_SOURCES[Math.floor(Math.random() * NEWS_SOURCES.length)];
        }

        // URL für eine News-Quelle abrufen
        function getNewsSourceUrl(source) {
            return NEWS_SOURCE_URLS[source] || 'https://www.coindesk.com';
        }

        // News aus dem Cache laden oder generieren
        async function fetchNewsForDate(section, date) {
            const dateKey = date.toISOString().split('T')[0];
            
            // Prüfen ob News bereits im Cache sind
            if (newsCache[section][dateKey]) {
                return newsCache[section][dateKey];
            }

            // Test-News generieren
            const news = generateMockNewsForDate(date, section);
            
            // News im Cache speichern
            if (!newsCache[section][dateKey]) {
                newsCache[section][dateKey] = news;
            }
            
            return news;
        }

        // News anzeigen
        function displayNews(news) {
            const newsGrid = document.getElementById('newsGrid');
            newsGrid.innerHTML = news.map(item => `
                <div class="news-card ${item.importance || ''} ${item.category || ''}">
                    ${item.importance === 'high' ? '<div class="breaking-news">Breaking News</div>' : ''}
                    <div class="news-meta">
                        <div class="news-date">${item.date}</div>
                        <div class="news-source-tag">${item.source}</div>
                    </div>
                    <div class="news-title">${item.title}</div>
                    <div class="news-excerpt">${item.excerpt}</div>
                    <div class="news-footer">
                        <a href="${item.url}" class="read-more-btn" target="_blank">
                            Zur Quelle
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                                <polyline points="15 3 21 3 21 9"></polyline>
                                <line x1="10" y1="14" x2="21" y2="3"></line>
                            </svg>
                        </a>
                        ${item.sentiment ? `
                            <div class="sentiment-indicator" title="Marktstimmung">
                                ${getSentimentEmoji(item.sentiment)}
                                ${(item.sentiment * 100).toFixed(0)}%
                            </div>
                        ` : ''}
                    </div>
                </div>
            `).join('');
        }
        // Initial News laden
        async function loadInitialNews() {
            try {
                const activeSection = document.querySelector('.section-toggle-btn.active').dataset.section;
                const news = await fetchNewsForDate(activeSection, currentDate);
                displayNews(news);
            } catch (error) {
                console.error('Fehler beim Laden der initialen News:', error);
            }
        }
        // Kategorie aus Tags oder Inhalt bestimmen
        const getCategoryFromTags = (tags = '') => {
            const lowerTags = String(tags).toLowerCase();
                if (lowerTags.includes('bitcoin') || lowerTags.includes('btc')) return 'bitcoin';
                if (lowerTags.includes('market') || lowerTags.includes('trading')) return 'market';
                if (lowerTags.includes('regulation') || lowerTags.includes('law')) return 'regulation';
                return 'all';
        };

        const getCategoryFromContent = (content = '') => {
            const lower = String(content).toLowerCase();
                if (lower.includes('aktie') || lower.includes('börse')) return 'stocks';
                if (lower.includes('wirtschaft') || lower.includes('konjunktur')) return 'economy';
                if (lower.includes('unternehmen') || lower.includes('firma')) return 'companies';
                return 'all';
        };

        async function loadNews(loadPreviousDay = false) {
            const newsGrid = document.getElementById('newsGrid');
            const newsLoading = document.getElementById('newsLoading');
            const newsError = document.getElementById('newsError');
            const currentSection = document.querySelector('.section-toggle-btn.active').dataset.section;
            
            try {
                // Loading-Status anzeigen
                newsLoading.style.display = 'block';
                newsError.style.display = 'none';
                newsGrid.style.display = 'none';
                newsGrid.classList.remove('loaded');

                if (loadPreviousDay) {
                    currentDate.setDate(currentDate.getDate() - 1);
                }

                // News von der API oder aus dem Cache laden
                const news = await fetchNewsForDate(currentSection, currentDate);
                
                // News anzeigen
                displayNews(news);
                
                // Loading-Status ausblenden
                newsLoading.style.display = 'none';
                newsGrid.style.display = 'grid';
                
                // Kurze Verzögerung für Animation
                setTimeout(() => {
                newsGrid.classList.add('loaded');
                }, 100);

                // Navigation-Buttons aktualisieren
                updateNavigationButtons();
            } catch (error) {
                console.error('Fehler beim Laden der News:', error);
                newsLoading.style.display = 'none';
                newsError.style.display = 'block';
                newsGrid.style.display = 'none';
            }
        }

        // Event Listener für Section Toggle und Navigation
        function initializeNewsSection() {
            const sectionToggleBtns = document.querySelectorAll('.section-toggle-btn');
            const newerNewsBtn = document.getElementById('newerNewsBtn');
            const olderNewsBtn = document.getElementById('olderNewsBtn');

            // Section Toggle Event Listener
            sectionToggleBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    sectionToggleBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Sections umschalten
                    document.querySelectorAll('.news-section').forEach(section => {
                        section.classList.remove('active');
                    });
                    document.getElementById(this.dataset.section + 'News').classList.add('active');
                    
                    // Überschrift aktualisieren
                    const newsTitle = document.getElementById('news-section-title');
                    if (this.dataset.section === 'crypto') {
                        newsTitle.textContent = '📰 Aktuelle Krypto-News';
                    } else {
                        newsTitle.textContent = '📰 Aktuelle Aktien & Wirtschafts-News';
                    }
                    
                    // News neu laden
                    currentDate = new Date(); // Reset auf aktuelles Datum
                    loadNews(false);
                });
            });

            // Navigation Buttons Event Listener
            if (newerNewsBtn) {
                newerNewsBtn.addEventListener('click', () => {
                    newerNewsBtn.classList.add('loading');
                    currentDate.setDate(currentDate.getDate() + 1);
                    loadNews(false).then(() => {
                        newerNewsBtn.classList.remove('loading');
                        updateNavigationButtons();
                    });
                });
            }

            if (olderNewsBtn) {
                olderNewsBtn.addEventListener('click', () => {
                    olderNewsBtn.classList.add('loading');
                    loadNews(true).then(() => {
                        olderNewsBtn.classList.remove('loading');
                        updateNavigationButtons();
                    });
                });
            }

            // News-Filter Event Listener
            const newsFilterBtns = document.querySelectorAll('.news-filter-btn');
            newsFilterBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    newsFilterBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    loadNews(false);
                });
            });

            // Initial News laden
            loadNews(false);
            updateNavigationButtons();
        }

                // Navigation Buttons und Datum anzeigen
        function updateNavigationButtons() {
                const newerNewsContainer = document.getElementById('newerNewsContainer');
                const olderNewsContainer = document.getElementById('olderNewsContainer');
                const currentDateDisplay = document.getElementById('currentNewsDate');
                const today = new Date();
                const daysSinceToday = Math.floor((today - currentDate) / (1000 * 60 * 60 * 24));
                
                // Aktuelles Datum anzeigen
                currentDateDisplay.textContent = currentDate.toLocaleDateString('de-DE');
                
                // "Neuere News" Button nur anzeigen, wenn wir nicht auf dem aktuellen Tag sind
                if (daysSinceToday > 0) {
                    newerNewsContainer.classList.add('visible');
                    const newerNewsBtn = document.getElementById('newerNewsBtn');
                    newerNewsBtn.classList.remove('loading');
                    const nextDate = new Date(currentDate);
                    nextDate.setDate(nextDate.getDate() + 1);
                    newerNewsBtn.querySelector('.btn-text').textContent = 
                        `News vom ${nextDate.toLocaleDateString('de-DE')} laden`;
                } else {
                    newerNewsContainer.classList.remove('visible');
                }
                
                // "Ältere News" Button nur anzeigen, wenn wir nicht weiter als 7 Tage zurück sind
                if (daysSinceToday < 7) {
                    olderNewsContainer.classList.add('visible');
                    const olderNewsBtn = document.getElementById('olderNewsBtn');
                    olderNewsBtn.classList.remove('loading');
                    const prevDate = new Date(currentDate);
                    prevDate.setDate(prevDate.getDate() - 1);
                    olderNewsBtn.querySelector('.btn-text').textContent = 
                        `News vom ${prevDate.toLocaleDateString('de-DE')} laden`;
                } else {
                    olderNewsContainer.classList.remove('visible');
            }
        }

        function displayNews(news) {
            const newsGrid = document.getElementById('newsGrid');
            
            // Maximal 10 News pro Tag anzeigen
            const limitedNews = news.slice(0, maxNewsPerDay);

            newsGrid.innerHTML = limitedNews.map(item => `
                <div class="news-card ${item.importance || ''}">
                    ${item.importance === 'high' ? '<div class="breaking-news">Breaking News</div>' : ''}
                    <div class="news-meta">
                        <div class="news-date">${item.date}</div>
                        <div class="news-source-tag">${item.source}</div>
                    </div>
                    <div class="news-title">${item.title}</div>
                    <div class="news-excerpt">${item.excerpt}</div>
                    <div class="news-footer">
                        <a href="${item.url}" class="read-more-btn" target="_blank">
                            Zur Quelle
                            <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                                <polyline points="15 3 21 3 21 9"></polyline>
                                <line x1="10" y1="14" x2="21" y2="3"></line>
                            </svg>
                        </a>
                        ${item.sentiment ? `
                            <div class="sentiment-indicator" title="Marktstimmung">
                                ${getSentimentEmoji(item.sentiment)}
                                ${(item.sentiment * 100).toFixed(0)}%
                            </div>
                        ` : ''}
                    </div>
                </div>
            `).join('');
        }



        const getSentimentEmoji = (sentiment) => {
            if (!sentiment) return '↔️';
            if (sentiment > 0.7) return '🚀';
            if (sentiment > 0.3) return '📈';
            if (sentiment > -0.3) return '↔️';
            if (sentiment > -0.7) return '📉';
            return '⚠️';
        };



        // Zufällige News-URL für eine Kategorie auswählen
        function getRandomNewsUrl(category) {
            const categoryUrls = NEWS_URLS[category] || NEWS_URLS['bitcoin'];
            return categoryUrls[Math.floor(Math.random() * categoryUrls.length)];
        }

        // Zufällige News-Quelle auswählen
        function getRandomSource() {
            return NEWS_SOURCES[Math.floor(Math.random() * NEWS_SOURCES.length)];
        }

        // Mock-News für ein bestimmtes Datum generieren
        function generateMockNewsForDate(date, section = 'crypto') {
            const formattedDate = date.toLocaleDateString('de-DE');
            const daysAgo = Math.floor((new Date() - date) / (1000 * 60 * 60 * 24));
            
            // Verschiedene News-Sets für verschiedene Tage
            const cryptoTemplates = [
                    {
                        title: `Bitcoin erreicht ${daysAgo === 0 ? 'heute' : 'am ' + formattedDate} neues Niveau`,
                    excerpt: `Der Bitcoin-Kurs zeigt sich ${daysAgo === 0 ? 'heute' : 'am ' + formattedDate} besonders stark und testet wichtige Widerstandszonen.`,
                    source: 'CoinDesk',
                    url: getNewsSourceUrl('CoinDesk')
                },
                    {
                        title: `Kryptomarkt ${daysAgo === 0 ? 'zeigt' : 'zeigte'} gemischte Signale`,
                    excerpt: `Die Gesamtmarktkapitalisierung ${daysAgo === 0 ? 'bewegt' : 'bewegte'} sich seitwärts, während einzelne Altcoins stark performten.`,
                    source: 'Cointelegraph',
                    url: getNewsSourceUrl('Cointelegraph')
                },
                {
                    title: `Ethereum ${daysAgo === 0 ? 'testet' : 'testete'} wichtige Unterstützung`,
                    excerpt: `Der Ethereum-Kurs ${daysAgo === 0 ? 'befindet' : 'befand'} sich in einer kritischen Phase. Trader beobachten die Entwicklung genau.`,
                    source: 'BTC-ECHO',
                    url: getNewsSourceUrl('BTC-ECHO')
                },
                    {
                        title: `Regulatorische Updates ${daysAgo === 0 ? 'heute' : 'vom ' + formattedDate}`,
                    excerpt: `Neue Entwicklungen im Bereich der Krypto-Regulierung ${daysAgo === 0 ? 'zeichnen' : 'zeichneten'} sich ab.`,
                    source: 'Bitcoin.de',
                    url: getNewsSourceUrl('Bitcoin.de')
                }
            ];

            const stocksTemplates = [
                {
                    title: `EZB-Ratssitzung: ${daysAgo === 0 ? 'Zinsentscheidung im Fokus' : 'Zinsentscheidung im Rückblick'}`,
                    excerpt: `Die Europäische Zentralbank ${daysAgo === 0 ? 'berät' : 'beriet'} über die weitere Geldpolitik. Marktteilnehmer ${daysAgo === 0 ? 'erwarten' : 'erwarteten'} wichtige Signale für den weiteren Kurs.`,
                    source: 'FAZ',
                    url: 'https://www.faz.net'
                },
                {
                    title: `Arbeitsmarktdaten ${daysAgo === 0 ? 'überraschen' : 'überraschten'} positiv`,
                    excerpt: `Die Beschäftigungszahlen ${daysAgo === 0 ? 'zeigen' : 'zeigten'} eine robuste Entwicklung. Ökonomen ${daysAgo === 0 ? 'sehen' : 'sahen'} darin ein positives Signal für die Konjunktur.`,
                    source: 'Handelsblatt',
                    url: 'https://www.handelsblatt.com'
                },
                {
                    title: `Tech-Aktien: Apple und Microsoft ${daysAgo === 0 ? 'führen' : 'führten'} Rally an`,
                    excerpt: `Die großen Technologiekonzerne ${daysAgo === 0 ? 'profitieren' : 'profitierten'} von starken Quartalszahlen und positiven Analystenkommentaren.`,
                    source: 'Der Aktionär',
                    url: 'https://www.deraktionaer.de'
                },
                {
                    title: `Ölpreis ${daysAgo === 0 ? 'reagiert' : 'reagierte'} auf OPEC-Entscheidung`,
                    excerpt: `Die Rohölmärkte ${daysAgo === 0 ? 'verarbeiten' : 'verarbeiteten'} die neuesten Förderquoten-Entscheidungen. Energieaktien ${daysAgo === 0 ? 'zeigen' : 'zeigten'} deutliche Bewegungen.`,
                    source: 'Börse Online',
                    url: 'https://www.boerse-online.de'
                },
                {
                    title: `Automobilsektor: Neue Absatzzahlen aus China`,
                    excerpt: `Die aktuellen Verkaufszahlen aus dem wichtigen chinesischen Markt ${daysAgo === 0 ? 'geben' : 'gaben'} wichtige Impulse für deutsche Autobauer.`,
                    source: 'Manager Magazin',
                    url: 'https://www.manager-magazin.de'
                },
                {
                    title: `Fed-Protokoll ${daysAgo === 0 ? 'gibt' : 'gab'} Einblick in Geldpolitik`,
                    excerpt: `Die Mitschrift der letzten Notenbanksitzung ${daysAgo === 0 ? 'zeigt' : 'zeigte'} die Diskussion über künftige Zinsschritte. Anleger ${daysAgo === 0 ? 'analysieren' : 'analysierten'} die Details genau.`,
                    source: 'Börsen-Zeitung',
                    url: 'https://www.boersen-zeitung.de'
                },
                {
                    title: `DAX-Konzerne: Dividendensaison ${daysAgo === 0 ? 'nimmt' : 'nahm'} Fahrt auf`,
                    excerpt: `Die Ausschüttungen der deutschen Großunternehmen ${daysAgo === 0 ? 'erreichen' : 'erreichten'} neue Rekordwerte. Anleger ${daysAgo === 0 ? 'können' : 'konnten'} sich über hohe Renditen freuen.`,
                    source: 'finanzen.net',
                    url: 'https://www.finanzen.net'
                },
                {
                    title: `Immobilienmarkt: Zinswende ${daysAgo === 0 ? 'zeigt' : 'zeigte'} Wirkung`,
                    excerpt: `Die veränderten Finanzierungsbedingungen ${daysAgo === 0 ? 'beeinflussen' : 'beeinflussten'} den Immobiliensektor deutlich. Experten ${daysAgo === 0 ? 'erwarten' : 'erwarteten'} Anpassungen am Markt.`,
                    source: 'Wirtschaftswoche',
                    url: 'https://www.wiwo.de'
                }
            ];

            const templates = section === 'crypto' ? cryptoTemplates : stocksTemplates;

            // News mit Datum versehen
            const news = templates.map(template => ({
                ...template,
                date: formattedDate
            }));

            // Zufällige Reihenfolge
            return news.sort(() => Math.random() - 0.5);
        }

        // Tab Navigation
        document.addEventListener('DOMContentLoaded', function() {
            // Tab Navigation Event Listener
            const navTabs = document.querySelectorAll('.nav-tab');
            const contentAreas = document.querySelectorAll('.content-area');
            const cryptoNav = document.getElementById('cryptoNav');
            const stocksNav = document.getElementById('stocksNav');
            const altcoinsNav = document.getElementById('altcoinsNav');
            const bitcoinContainer = document.querySelector('.bitcoin-container');
            const altcoinsContainer = document.querySelector('.altcoins-container');

            // Altcoins Navigation
            const altcoinButtons = document.querySelectorAll('[data-altcoin]');
            const altcoinSections = document.querySelectorAll('.altcoin-section');

            altcoinButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const altcoin = this.dataset.altcoin;
                    
                    // Aktive Klasse von allen Buttons entfernen
                    altcoinButtons.forEach(btn => btn.classList.remove('active'));
                    // Aktive Klasse zum geklickten Button hinzufügen
                    this.classList.add('active');
                    
                    // Alle Sections ausblenden
                    altcoinSections.forEach(section => {
                        section.style.display = 'none';
                    });
                    
                    // Gewählte Section anzeigen
                    const selectedSection = document.querySelector(`.${altcoin}-section`);
                    if (selectedSection) {
                        selectedSection.style.display = 'block';
                    }
                });
            });

            // Bitcoin/Altcoins Navigation
            const cryptoButtons = document.querySelectorAll('[data-subtab]');
            const bitcoinTradingInfo = document.getElementById('bitcoin-trading-info');
            
            // Bitcoin-Trading-Info standardmäßig anzeigen
            if (bitcoinTradingInfo) {
                bitcoinTradingInfo.style.display = 'block';
            }
            
            cryptoButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const subtab = this.dataset.subtab;
                    
                    // Aktive Klasse von allen Buttons entfernen
                    cryptoButtons.forEach(btn => btn.classList.remove('active'));
                    // Aktive Klasse zum geklickten Button hinzufügen
                    this.classList.add('active');
                    
                    // Container anzeigen/ausblenden
                    if (subtab === 'bitcoin') {
                        bitcoinContainer.style.display = 'block';
                        altcoinsContainer.style.display = 'none';
                        altcoinsNav.style.display = 'none';
                        bitcoinTradingInfo.style.display = 'block';
                        document.querySelector('.telegram-container').style.display = 'none';
                    } else if (subtab === 'altcoins') {
                        bitcoinContainer.style.display = 'none';
                        altcoinsContainer.style.display = 'block';
                        altcoinsNav.style.display = 'block';
                        bitcoinTradingInfo.style.display = 'none';
                    }
                });
            });

            // Haupt-Navigation
            navTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Aktiven Tab aktualisieren
                    navTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');

                    // Content Areas aktualisieren
                    const targetId = this.getAttribute('data-tab');
                    contentAreas.forEach(area => {
                        area.classList.remove('active');
                        if (area.id === targetId) {
                            area.classList.add('active');
                        }
                    });

                    // Prüfen ob Analysis-Tab aktiv ist und Benutzer nicht angemeldet
                    if (targetId === 'analysis' && !currentUser) {
                        showAnalysisBlurOverlay();
                    } else {
                        hideAnalysisBlurOverlay();
                    }

                    // Telegram-spezifische Aktionen
                    if (targetId === 'telegram') {
                        // Verzögerung hinzufügen, damit der Content-Bereich erst angezeigt wird
                        setTimeout(() => {
                            loadTelegramChannelInfo();
                        }, 100);
                    }
                });
            });

            // Haupt-Analyse-Tabs Event Listener
            const mainAnalysisBtns = document.querySelectorAll('.analysis-nav-btn.main');
            mainAnalysisBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    mainAnalysisBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    handleMainTabChange(this.getAttribute('data-maintab'));
                });
            });

            // Funktion zum Umschalten der Sub-Tabs
            function handleMainTabChange(mainTab) {
                if (mainTab === 'crypto') {
                    cryptoNav.classList.add('show');
                    stocksNav.classList.remove('show');
                    // Aktiviere den ersten Crypto-Tab, wenn keiner aktiv ist
                    if (!cryptoNav.querySelector('.analysis-nav-btn.active')) {
                        cryptoNav.querySelector('.analysis-nav-btn').classList.add('active');
                    }
                } else {
                    stocksNav.classList.add('show');
                    cryptoNav.classList.remove('show');
                    // Aktiviere den ersten Stocks-Tab, wenn keiner aktiv ist
                    if (!stocksNav.querySelector('.analysis-nav-btn.active')) {
                        stocksNav.querySelector('.analysis-nav-btn').classList.add('active');
                    }
                }
            }

            // Sub-Tabs Event Listener
            const subNavBtns = document.querySelectorAll('.analysis-nav-btn.sub');
            subNavBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Nur die Buttons in der gleichen Gruppe deaktivieren
                    const parentGroup = this.closest('.analysis-nav-group');
                    parentGroup.querySelectorAll('.analysis-nav-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // Chart View Toggle
            const chartToggleBtns = document.querySelectorAll('.chart-toggle-btn');
            const liveChartView = document.getElementById('live-chart-view');
            const screenshotView = document.getElementById('screenshot-view');

            chartToggleBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Toggle Button Aktivierung
                    chartToggleBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');

                    const targetView = this.getAttribute('data-view');
                    
                    // Chart Views umschalten
                    const screenshotInfo = document.getElementById('screenshot-info');
                    const liveInfo = document.getElementById('live-info');

                    if (targetView === 'live') {
                        liveChartView.style.display = 'block';
                        screenshotView.style.display = 'none';
                        screenshotInfo.style.display = 'none';
                        liveInfo.style.display = 'block';
                        // TradingView Widget neu initialisieren
                        initTradingViewCharts();
                    } else {
                        liveChartView.style.display = 'none';
                        screenshotView.style.display = 'block';
                        screenshotInfo.style.display = 'grid';
                        liveInfo.style.display = 'none';
                    }
                });
            });

            // News-Sektion initialisieren
            initializeNewsSection();
            
            // TradingView Widget initialisieren
            setTimeout(initTradingViewCharts, 1000);
        });

        // Responsive Navigation
        function toggleMobileMenu() {
            const nav = document.querySelector('.nav-tabs');
            nav.classList.toggle('mobile-active');
        }

        // Keyboard Navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Tab') {
                // Tab Navigation mit Keyboard
                const activeTab = document.querySelector('.nav-tab.active');
                if (activeTab) {
                    activeTab.focus();
                }
            }
        });

        // Performance Optimierung
        let ticking = false;
        function updateAnimations() {
            if (!ticking) {
                requestAnimationFrame(() => {
                    // Animation Updates hier
                    ticking = false;
                });
                ticking = true;
            }
        }

        // Scroll Event Listener
        window.addEventListener('scroll', updateAnimations);

        // Floating Logo Scroll Effect
        window.addEventListener('scroll', function() {
            const floatingLogo = document.querySelector('.floating-logo');
            const scrollY = window.scrollY;
            
            if (scrollY > 100) {
                floatingLogo.style.transform = 'scale(0.9)';
                floatingLogo.style.opacity = '0.8';
            } else {
                floatingLogo.style.transform = 'scale(1)';
                floatingLogo.style.opacity = '1';
            }
        });
    </script>
    <script>
        // TradingView Charts mit deinen Trading-Einstellungen initialisieren
        function initTradingViewCharts() {
            const chartContainer = document.getElementById('tradingview_btc_chart');
            // Container leeren, um Widget neu zu initialisieren
            chartContainer.innerHTML = '';
            
            // Bitcoin Chart - Dein mittelfristiges Setup (1T)
            new TradingView.widget({
                "autosize": true,
                "symbol": "BINANCE:BTCUSDT",
                "interval": "D",
                "timezone": "Europe/Berlin",
                "theme": "dark",
                "style": "1",
                "locale": "de_DE",
                "toolbar_bg": "#1a1a1a",
                "enable_publishing": false,
                "hide_side_toolbar": false,
                "allow_symbol_change": false,
                "studies": [
                    {
                        "id": "MASimple@tv-basicstudies",
                        "inputs": {
                            "length": 20,
                            "source": "close"
                        }
                    },
                    {
                        "id": "MACD@tv-basicstudies"
                    },
                    {
                        "id": "RSI@tv-basicstudies"
                    }
                ],
                "container_id": "tradingview_btc_chart",
                "hide_top_toolbar": false,
                "hide_legend": false,
                "save_image": false,
                "backgroundColor": "#1a1a1a",
                "gridColor": "#242424",
                "studies_overrides": {
                    "moving average.20.color": "#00ff88",
                    "moving average.20.linewidth": 2,
                    "volume.volume.color.0": "#ff475755",
                    "volume.volume.color.1": "#00ff8855",
                    "bollinger bands.upper.linewidth": 1,
                    "bollinger bands.lower.linewidth": 1,
                    "bollinger bands.basis.linewidth": 1,
                    "macd.macd.color": "#00ff88",
                    "macd.signal.color": "#ff4757"
                },
                "loading_screen": { "backgroundColor": "#1a1a1a" },
                "overrides": {
                    "paneProperties.background": "#1a1a1a",
                    "paneProperties.vertGridProperties.color": "#242424",
                    "paneProperties.horzGridProperties.color": "#242424",
                    "scalesProperties.textColor": "#AAA",
                    "mainSeriesProperties.candleStyle.upColor": "#00ff88",
                    "mainSeriesProperties.candleStyle.downColor": "#ff4757",
                    "mainSeriesProperties.candleStyle.wickUpColor": "#00ff88",
                    "mainSeriesProperties.candleStyle.wickDownColor": "#ff4757"
                }
            });

            // Altcoins Chart - Ethereum mit ähnlichen Einstellungen
            new TradingView.widget({
                "width": "100%",
                "height": "500",
                "symbol": "BINANCE:ETHUSDT",
                "interval": "1D",
                "timezone": "Europe/Berlin",
                "theme": "dark",
                "style": "1",
                "locale": "de_DE",
                "toolbar_bg": "#1a1a1a",
                "enable_publishing": false,
                "hide_top_toolbar": false,
                "hide_legend": false,
                "save_image": false,
                "container_id": "tradingview_altcoins_chart",
                "studies": [
                    "MAExp@tv-basicstudies-9", // 9-Perioden MA
                    "MAExp@tv-basicstudies-21", // 21-Perioden MA
                    "RSI@tv-basicstudies",
                    "Volume@tv-basicstudies"
                ]
            });

            // Live-Daten nach Chart-Initialisierung laden
            setTimeout(() => {
                loadLiveData();
                // Alle 30 Sekunden aktualisieren
                setInterval(() => {
                    console.log('Aktualisiere Live-Daten...');
                    loadLiveData();
                }, 30000);
                
                // Chart Slider initialisieren
                initChartSlider();
            }, 2000);
        }

        // Charts nach DOM-Load initialisieren
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 DOM geladen, starte TradingView Charts...');
            // Verzögerung für TradingView Script
            setTimeout(initTradingViewCharts, 1000);
        });

        // Chart-Status überwachen
        function checkChartStatus() {
            const chartContainer = document.getElementById('tradingview_btc_chart');
            if (chartContainer) {
                const chartElement = chartContainer.querySelector('.tv-chart-container');
                if (chartElement) {
                    console.log('✅ TradingView Chart ist geladen!');
                    addSupportResistanceLines();
                    return true;
                } else {
                    console.log('⏳ Chart lädt noch...');
                    return false;
                }
            } else {
                console.log('❌ Chart-Container nicht gefunden');
                return false;
            }
        }

        // Intelligente Datenladung mit Fallbacks
        async function loadLiveData() {
            try {
                // Loading States aktivieren
                setLoadingStates(true);
                
                // Indikatoren aktualisieren
                updateTechnicalIndicators();
                
                // Verwende direkt Mock-Daten für bessere Performance
                await loadAlternativeData();
                
            } catch (error) {
                console.error('Fehler beim Laden der Daten:', error);
                setFallbackData();
            } finally {
                setLoadingStates(false);
            }
        }

        // Indikator-Erklärungen für verschiedene Zustände
        const INDICATOR_DESCRIPTIONS = {
            rsi: {
                low: {
                    value: "Überverkauft",
                    description: "RSI unter 30: Starke Überverkauft-Situation. Potenzial für Korrektur nach oben. RSI (Relative Strength Index) misst die Geschwindigkeit und Änderung von Preisbewegungen."
                },
                neutral: {
                    value: "Neutral",
                    description: "RSI zwischen 30-70: Ausgewogener Bereich. Markt zeigt keine extreme Überkauft- oder Überverkauft-Situation. RSI (Relative Strength Index) misst die Geschwindigkeit und Änderung von Preisbewegungen."
                },
                high: {
                    value: "Überkauft",
                    description: "RSI über 70: Starke Überkauft-Situation. Vorsicht vor möglicher Korrektur nach unten. RSI (Relative Strength Index) misst die Geschwindigkeit und Änderung von Preisbewegungen."
                }
            },
            macd: {
                bullish: {
                    value: "Bullish Crossover",
                    description: "MACD über Signallinie: Positiver Momentum-Indikator zeigt starken Aufwärtstrend. MACD misst die Differenz zwischen zwei exponentiellen Moving Averages (12 und 26 Perioden)."
                },
                bearish: {
                    value: "Bearish Crossover",
                    description: "MACD unter Signallinie: Negativer Momentum-Indikator zeigt Abwärtstrend. MACD misst die Differenz zwischen zwei exponentiellen Moving Averages (12 und 26 Perioden)."
                },
                neutral: {
                    value: "Neutral",
                    description: "MACD nahe Signallinie: Ausgewogener Momentum. Kein klarer Trend erkennbar. MACD misst die Differenz zwischen zwei exponentiellen Moving Averages (12 und 26 Perioden)."
                }
            },
            ma20: {
                support: {
                    value: "Unterstützung",
                    description: "Preis über 20 MA: Bestätigt mittelfristigen Aufwärtstrend. 20-Perioden Moving Average zeigt die durchschnittliche Preisentwicklung der letzten 20 Perioden."
                },
                resistance: {
                    value: "Widerstand",
                    description: "Preis unter 20 MA: Zeigt Abwärtstrend. 20-Perioden Moving Average zeigt die durchschnittliche Preisentwicklung der letzten 20 Perioden."
                },
                neutral: {
                    value: "Neutral",
                    description: "Preis nahe 20 MA: Ausgewogene Situation. 20-Perioden Moving Average zeigt die durchschnittliche Preisentwicklung der letzten 20 Perioden."
                }
            },
            sentiment: {
                bullish: {
                    value: "Bullish",
                    description: "Technische Indikatoren zeigen überwiegend positive Signale. Momentum ist auf der Käuferseite."
                },
                bearish: {
                    value: "Bearish",
                    description: "Technische Indikatoren zeigen überwiegend negative Signale. Momentum ist auf der Verkäuferseite."
                },
                neutral: {
                    value: "Neutral",
                    description: "Technische Indikatoren zeigen gemischte Signale. Markt ist ausgewogen."
                }
            }
        };

        // Technische Indikatoren aktualisieren (dynamisch)
        function updateTechnicalIndicators() {
            console.log('Technische Indikatoren werden aktualisiert...');
            
            // Simulierte Live-Werte (später durch echte API-Daten ersetzen)
            const currentRSI = 45 + Math.random() * 50; // 45-95
            const currentMACD = Math.random() > 0.5 ? 'bullish' : 'bearish';
            const currentMA20 = Math.random() > 0.5 ? 'support' : 'resistance';
            const currentSentiment = Math.random() > 0.5 ? 'bullish' : 'neutral';

            // RSI-Erklärung basierend auf Wert
            let rsiState = 'neutral';
            if (currentRSI < 30) rsiState = 'low';
            else if (currentRSI > 70) rsiState = 'high';

            // Indikator-Erklärungen aktualisieren
            updateIndicatorDescription('rsi', rsiState, currentRSI.toFixed(1));
            updateIndicatorDescription('macd', currentMACD);
            updateIndicatorDescription('ma20', currentMA20);
            updateIndicatorDescription('sentiment', currentSentiment);
            
            // Fazit basierend auf allen Indikatoren aktualisieren
            updateSummary(currentRSI, currentMACD, currentMA20, currentSentiment);
        }

        // Indikator-Beschreibung in der UI aktualisieren
        function updateIndicatorDescription(indicator, state, value = null) {
            const descriptions = INDICATOR_DESCRIPTIONS[indicator];
            if (!descriptions || !descriptions[state]) return;

            const description = descriptions[state];
            
            // Elemente in der UI finden und aktualisieren
            const liveInfo = document.getElementById('live-info');
            if (!liveInfo) return;

            let targetElement;
            switch(indicator) {
                case 'rsi':
                    targetElement = liveInfo.querySelector('.level-item:nth-child(3)');
                    break;
                case 'macd':
                    targetElement = liveInfo.querySelector('.level-item:nth-child(2)');
                    break;
                case 'ma20':
                    targetElement = liveInfo.querySelector('.level-item:nth-child(4)');
                    break;
                case 'sentiment':
                    targetElement = liveInfo.querySelector('.level-item:nth-child(1)');
                    break;
            }

            if (targetElement) {
                const valueElement = targetElement.querySelector('.level-value');
                const descElement = targetElement.querySelector('.level-description');
                
                if (valueElement) {
                    valueElement.textContent = value || description.value;
                    // CSS-Klasse für Farbe anpassen
                    valueElement.className = 'level-value ' + (state === 'bullish' || state === 'support' ? 'positive' : 
                                                              state === 'bearish' || state === 'resistance' ? 'negative' : 'neutral');
                }
                
                if (descElement) {
                    descElement.textContent = description.description;
                }
            }
        }

        // Alternative Datenquelle mit deinen echten Trading-Levels
        async function loadAlternativeData() {
            try {
                console.log('🔄 Lade alternative Datenquelle mit deinen Trading-Levels...');

                // Simulierte Verzögerung für realistische Ladezeit
                await new Promise(resolve => setTimeout(resolve, 800));

                // Realistische Mock-Daten basierend auf deinen Trading-Levels
                const btcMockData = {
                    usd: 119000 + Math.random() * 4000 - 2000, // $119,000 ± $2,000 (um deinen aktuellen Chart-Preis)
                    usd_24h_change: Math.random() * 6 - 3, // -3% bis +3% (als Zahl)
                    usd_24h_vol: 25000000000 + Math.random() * 10000000000 // $25B ± $10B
                };

                const ethMockData = {
                    usd: 2850 + Math.random() * 200 - 100, // $2,850 ± $100
                    usd_24h_change: Math.random() * 8 - 4, // -4% bis +4% (als Zahl)
                    usd_24h_vol: 15000000000 + Math.random() * 8000000000 // $15B ± $8B
                };

                // Intelligente Mock-Preishistorie für technische Analyse
                const generateMockPriceHistory = (basePrice, volatility, trend) => {
                    const history = [];
                    let currentPrice = basePrice;
                    const now = Date.now();
                    
                    for (let i = 13; i >= 0; i--) {
                        const timestamp = now - (i * 24 * 60 * 60 * 1000);
                        
                        // Trend-basierte Preisbewegung + Zufälligkeit
                        const trendComponent = trend * (i / 13); // Trend wird stärker je näher an heute
                        const randomComponent = (Math.random() - 0.5) * volatility;
                        const change = (trendComponent + randomComponent) * currentPrice;
                        
                        currentPrice = Math.max(currentPrice + change, basePrice * 0.7);
                        history.push([timestamp, currentPrice]);
                    }
                    return history;
                };

                // Verschiedene Trends für Bitcoin und Ethereum
                const btcTrend = (Math.random() - 0.5) * 0.1; // Leichter Auf- oder Abwärtstrend
                const ethTrend = (Math.random() - 0.5) * 0.08; // Etwas weniger volatil
                
                const btcPriceHistory = generateMockPriceHistory(43250, 0.03, btcTrend);
                const ethPriceHistory = generateMockPriceHistory(2850, 0.04, ethTrend);

                // Statistiken mit technischer Analyse aktualisieren
                updateBitcoinStats(btcMockData, btcPriceHistory);
                updateAltcoinStats(ethMockData, ethPriceHistory);

                console.log('✅ Alternative Daten erfolgreich geladen (Mock-Daten)');
                console.log('📊 Bitcoin:', btcMockData);
                console.log('📊 Ethereum:', ethMockData);
                
            } catch (error) {
                console.error('❌ Fehler bei alternativen Daten:', error);
                setFallbackData();
            }
        }

        // Bitcoin Statistiken mit deiner Trading-Strategie aktualisieren
        function updateBitcoinStats(btcData, priceHistory) {
            const price = document.getElementById('btc-price');
            const change = document.getElementById('btc-change');
            const trend = document.getElementById('btc-trend');
            const target = document.getElementById('btc-target');

            if (price) price.textContent = `$${btcData.usd.toLocaleString()}`;
            if (change) {
                const changeValue = btcData.usd_24h_change;
                const changeText = changeValue >= 0 ? `+${changeValue.toFixed(2)}%` : `${changeValue.toFixed(2)}%`;
                change.textContent = changeText;
                change.style.color = changeValue >= 0 ? '#00ff88' : '#ff4757';
            }
            if (trend) {
                // Deine Trading-Strategie: MA Cross 9/21 + Support/Resistance
                const sentiment = calculateTechnicalSentiment(priceHistory, btcData.usd);
                
                // Zusätzliche Analyse basierend auf deinem Setup
                let customSentiment = sentiment;
                if (btcData.usd > 121100) {
                    customSentiment = { text: "🚀 Breakout über 121.100$", color: "#00ff88" };
                } else if (btcData.usd < 98300) {
                    customSentiment = { text: "⚠️ Test der 98.300$ Unterstützung", color: "#ffaa00" };
                } else if (btcData.usd < 78250) {
                    customSentiment = { text: "🔴 Kritische Unterstützung 78.250$", color: "#ff4444" };
                } else if (btcData.usd >= 55000 && btcData.usd <= 76377) {
                    customSentiment = { text: "🎯 Zielbereich erreicht (55.000$ - 76.377$)", color: "#0088ff" };
                } else if (btcData.usd < 73500) {
                    customSentiment = { text: "🚨 Kritische Unterstützung bei 73.500$", color: "#8b0000" };
                }
                
                trend.textContent = customSentiment.text;
                trend.style.color = customSentiment.color;
            }
            if (target) {
                // Deine spezifischen Support/Resistance Levels
                const targetLevels = calculateTechnicalTargets(priceHistory, btcData.usd);
                
                // Deine Trading-Ziele basierend auf dem Chart
                let customTarget = targetLevels;
                if (btcData.usd > 121100) {
                    customTarget = { nextTarget: "Nächstes Ziel: 130.000$", color: "#00ff88" };
                } else if (btcData.usd < 98300) {
                    customTarget = { nextTarget: "Unterstützung: 78.250$", color: "#ffaa00" };
                } else if (btcData.usd < 78250) {
                    customTarget = { nextTarget: "Kritischer Bereich: 73.500$", color: "#ff4444" };
                } else if (btcData.usd >= 55000 && btcData.usd <= 76377) {
                    customTarget = { nextTarget: "Zielbereich: 55.000$ - 76.377$", color: "#0088ff" };
                } else if (btcData.usd < 73500) {
                    customTarget = { nextTarget: "Kritische Unterstützung: 55.000$", color: "#8b0000" };
                }
                
                target.textContent = customTarget.nextTarget;
                target.style.color = customTarget.color;
            }
        }

        // Altcoin Statistiken aktualisieren
        function updateAltcoinStats(ethData, priceHistory) {
            const price = document.getElementById('alt-price');
            const change = document.getElementById('alt-change');
            const trend = document.getElementById('alt-trend');
            const volume = document.getElementById('alt-volume');
            const trendIndicator = document.getElementById('alt-trend-indicator');

            if (price) price.textContent = `$${ethData.usd.toLocaleString()}`;
            if (change) {
                const changeValue = ethData.usd_24h_change;
                const changeText = changeValue >= 0 ? `+${changeValue.toFixed(2)}%` : `${changeValue.toFixed(2)}%`;
                change.textContent = changeText;
                change.style.color = changeValue >= 0 ? '#00ff88' : '#ff4757';
            }
            if (trend) {
                // Professionelle Sentiment-Analyse basierend auf technischen Indikatoren
                const sentiment = calculateTechnicalSentiment(priceHistory, ethData.usd);
                trend.textContent = sentiment.text;
                trend.style.color = sentiment.color;
                
                // Trend-Indikator aktualisieren
                if (trendIndicator) {
                    if (sentiment.sentiment === 'bullish') {
                        trendIndicator.className = 'trend-indicator trend-bullish';
                    } else if (sentiment.sentiment === 'bearish') {
                        trendIndicator.className = 'trend-indicator trend-bearish';
                    } else {
                        trendIndicator.className = 'trend-indicator trend-neutral';
                    }
                }
            }
            if (volume) {
                const volumeInBillions = (ethData.usd_24h_vol / 1000000000).toFixed(2);
                volume.textContent = `$${volumeInBillions}B`;
            }
        }

        // Loading States verwalten
        function setLoadingStates(loading) {
            const statValues = document.querySelectorAll('.stat-value');
            statValues.forEach(stat => {
                if (loading) {
                    stat.classList.add('loading');
                } else {
                    stat.classList.remove('loading');
                }
            });
        }

        // Chart Screenshot Slider - Interaktive Anzeige deiner Chart-Screenshots
        function initChartSlider() {
            console.log('📊 Chart Screenshot Slider initialisiert');
            
            const screenshotSlides = document.querySelectorAll('.screenshot-slide');
            const screenshotContents = document.querySelectorAll('.screenshot-content');
            
            screenshotSlides.forEach(slide => {
                slide.addEventListener('click', function() {
                    const slideType = this.getAttribute('data-slide');
                    
                    // Aktiven Slide aktualisieren
                    screenshotSlides.forEach(screenshotSlide => screenshotSlide.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Screenshot-Inhalt anzeigen
                    screenshotContents.forEach(content => {
                        content.classList.remove('active');
                        if (content.getAttribute('data-slide') === slideType) {
                            content.classList.add('active');
                        }
                    });
                    
                    console.log('📊 Screenshot Slide ausgewählt:', slideType);
                });
            });
        }
        
        // Bestätigung anzeigen, dass Support/Resistance Linien geladen wurden
        function showSupportResistanceConfirmation() {
            const confirmation = document.createElement('div');
            confirmation.id = 'support-resistance-confirmation';
            confirmation.innerHTML = `
                <div style="
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: #00ff88;
                    color: #000;
                    padding: 15px 20px;
                    border-radius: 8px;
                    font-weight: bold;
                    z-index: 10000;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                    animation: slideIn 0.5s ease-out;
                ">
                    🎯 Deine Trading-Levels geladen!
                    <br>121.100$ | 98.300$ | 78.250$ | 73.500$ | 55.000$
                </div>
            `;
            
            document.body.appendChild(confirmation);
            
            // Nach 5 Sekunden ausblenden
            setTimeout(() => {
                if (confirmation.parentNode) {
                    confirmation.parentNode.removeChild(confirmation);
                }
            }, 5000);
        }

        // Technische Sentiment-Analyse basierend auf mehreren Indikatoren
        function calculateTechnicalSentiment(priceHistory, currentPrice) {
            if (!priceHistory || priceHistory.length < 14) {
                return { text: 'Analyse lädt...', color: '#cccccc', sentiment: 'neutral' };
            }

            // Preisdaten extrahieren (CoinGecko gibt [timestamp, price] Arrays zurück)
            const prices = priceHistory.map(p => p[1]);
            const currentIndex = prices.length - 1;
            
            // 1. Moving Averages (7 und 14 Tage)
            const ma7 = calculateMA(prices, 7);
            const ma14 = calculateMA(prices, 14);
            
            // 2. RSI (Relative Strength Index)
            const rsi = calculateRSI(prices, 14);
            
            // 3. Momentum (Preisänderung über verschiedene Zeiträume)
            const momentum1d = ((currentPrice - prices[currentIndex - 1]) / prices[currentIndex - 1]) * 100;
            const momentum7d = ((currentPrice - prices[currentIndex - 7]) / prices[currentIndex - 7]) * 100;
            
            // 4. Volatilität
            const volatility = calculateVolatility(prices, 14);
            
            // Sentiment-Score berechnen
            let bullishSignals = 0;
            let bearishSignals = 0;
            
            // MA-Signale
            if (currentPrice > ma7 && ma7 > ma14) bullishSignals += 2;
            else if (currentPrice < ma7 && ma7 < ma14) bearishSignals += 2;
            
            // RSI-Signale
            if (rsi < 30) bullishSignals += 2; // Überverkauft
            else if (rsi > 70) bearishSignals += 2; // Überkauft
            else if (rsi > 50) bullishSignals += 1; // Über der Mittellinie
            
            // Momentum-Signale
            if (momentum1d > 0 && momentum7d > 0) bullishSignals += 2;
            else if (momentum1d < 0 && momentum7d < 0) bearishSignals += 2;
            
            // Volatilitäts-Signale (niedrige Volatilität = stabiler Trend)
            if (volatility < 0.05) bullishSignals += 1;
            
            // Sentiment bestimmen
            if (bullishSignals > bearishSignals + 2) {
                return { text: 'Strong Bullish 🚀', color: '#00ff88', sentiment: 'bullish' };
            } else if (bullishSignals > bearishSignals) {
                return { text: 'Bullish 📈', color: '#00ff88', sentiment: 'bullish' };
            } else if (bearishSignals > bullishSignals + 2) {
                return { text: 'Strong Bearish 📉', color: '#ff4757', sentiment: 'bearish' };
            } else if (bearishSignals > bullishSignals) {
                return { text: 'Bearish 📉', color: '#ff4757', sentiment: 'bearish' };
            } else {
                return { text: 'Neutral ⚖️', color: '#ffa502', sentiment: 'neutral' };
            }
        }

        // Technische Unterstützungs- und Widerstandslevel berechnen
        function calculateTechnicalTargets(priceHistory, currentPrice) {
            if (!priceHistory || priceHistory.length < 14) {
                return { nextTarget: 'Analyse lädt...', color: '#cccccc' };
            }

            const prices = priceHistory.map(p => p[1]);
            
            // Unterstützungslevel (Support) - niedrigste Preise der letzten 14 Tage
            const supportLevels = findSupportLevels(prices);
            const nearestSupport = supportLevels.find(level => level < currentPrice) || Math.min(...prices);
            
            // Widerstandslevel (Resistance) - höchste Preise der letzten 14 Tage
            const resistanceLevels = findResistanceLevels(prices);
            const nearestResistance = resistanceLevels.find(level => level > currentPrice) || Math.max(...prices);
            
            // Fibonacci Retracement Level (38.2% und 61.8%)
            const high = Math.max(...prices);
            const low = Math.min(...prices);
            const fib38 = high - (high - low) * 0.382;
            const fib61 = high - (high - low) * 0.618;
            
            // Nächstes Ziel bestimmen
            let nextTarget, color;
            if (currentPrice > fib61) {
                // Über 61.8% - nächstes Ziel ist der Widerstand
                nextTarget = `$${Math.round(nearestResistance).toLocaleString()}`;
                color = '#00ff88';
            } else if (currentPrice < fib38) {
                // Unter 38.2% - nächstes Ziel ist der Support
                nextTarget = `$${Math.round(nearestSupport).toLocaleString()}`;
                color = '#ff4757';
            } else {
                // Zwischen 38.2% und 61.8% - nächstes Ziel ist 61.8%
                nextTarget = `$${Math.round(fib61).toLocaleString()}`;
                color = '#ffa502';
            }
            
            return { nextTarget, color };
        }

        // Hilfsfunktionen für technische Analyse
        function calculateMA(prices, period) {
            const recentPrices = prices.slice(-period);
            return recentPrices.reduce((sum, price) => sum + price, 0) / period;
        }

        function calculateRSI(prices, period) {
            if (prices.length < period + 1) return 50;
            
            let gains = 0, losses = 0;
            for (let i = prices.length - period; i < prices.length; i++) {
                const change = prices[i] - prices[i - 1];
                if (change > 0) gains += change;
                else losses += Math.abs(change);
            }
            
            const avgGain = gains / period;
            const avgLoss = losses / period;
            const rs = avgGain / avgLoss;
            return 100 - (100 / (1 + rs));
        }

        function calculateVolatility(prices, period) {
            const recentPrices = prices.slice(-period);
            const mean = recentPrices.reduce((sum, price) => sum + price, 0) / period;
            const variance = recentPrices.reduce((sum, price) => sum + Math.pow(price - mean, 2), 0) / period;
            return Math.sqrt(variance) / mean;
        }

        function findSupportLevels(prices) {
            const levels = [];
            for (let i = 1; i < prices.length - 1; i++) {
                if (prices[i] < prices[i - 1] && prices[i] < prices[i + 1]) {
                    levels.push(prices[i]);
                }
            }
            return levels.sort((a, b) => b - a); // Absteigend sortieren
        }

        function findResistanceLevels(prices) {
            const levels = [];
            for (let i = 1; i < prices.length - 1; i++) {
                if (prices[i] > prices[i - 1] && prices[i] > prices[i + 1]) {
                    levels.push(prices[i]);
                }
            }
            return levels.sort((a, b) => a - b); // Aufsteigend sortieren
        }

        // Fallback-Daten bei API-Fehlern
        function setFallbackData() {
            const btcPrice = document.getElementById('btc-price');
            const btcChange = document.getElementById('btc-change');
            const btcTrend = document.getElementById('btc-trend');
            const btcTarget = document.getElementById('btc-target');

            if (btcPrice) btcPrice.textContent = '$48,250';
            if (btcChange) btcChange.textContent = '+5.2%';
            if (btcTrend) btcTrend.textContent = 'Bullish 🚀';
            if (btcTarget) btcTarget.textContent = '$52,000';

            const altPrice = document.getElementById('alt-price');
            const altChange = document.getElementById('alt-change');
            const altTrend = document.getElementById('alt-trend');
            const altVolume = document.getElementById('alt-volume');

            if (altPrice) altPrice.textContent = '$2,850';
            if (altChange) altChange.textContent = '+3.8%';
            if (btcTrend) altTrend.textContent = 'Bullish 🚀';
            if (altVolume) altVolume.textContent = '$12.5B';
        }

        // Telegram Integration
        const TELEGRAM_BOT_TOKEN = '8440582786:AAEebLtn05pWnBqIvnHyZzWxdR9rfr_mmJ8';
        const TELEGRAM_CHANNEL = '@SharkzCrib';

        // Telegram Channel-Info laden
        async function loadTelegramChannelInfo() {
            const loadingEl = document.getElementById('telegramLoading');
            const statsEl = document.getElementById('channelStats');
            const errorEl = document.getElementById('telegramError');

            // Prüfen ob Elemente existieren
            if (!loadingEl || !statsEl || !errorEl) {
                console.error('Telegram-Elemente nicht gefunden');
                return;
            }

            try {
                // Loading anzeigen
                loadingEl.style.display = 'block';
                statsEl.style.display = 'none';
                errorEl.style.display = 'none';

                // Channel-Info von Telegram API abrufen
                const response = await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/getChat?chat_id=${TELEGRAM_CHANNEL}`);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                
                if (data.ok && data.result) {
                    // Channel-Info verarbeiten
                    processChannelInfo(data.result);
                } else {
                    // Fallback: Standard-Statistiken anzeigen
                    displayDefaultStats();
                }

            } catch (error) {
                console.error('Fehler beim Laden der Channel-Info:', error);
                // Fallback: Standard-Statistiken anzeigen
                displayDefaultStats();
            } finally {
                if (loadingEl) {
                    loadingEl.style.display = 'none';
                }
            }
        }

        // Channel-Info verarbeiten
        function processChannelInfo(channelData) {
            // Analysen-Zahl basierend auf Channel-Aktivität berechnen
            const analysesCount = calculateAnalysesCount();
            
            // Statistiken anzeigen
            document.getElementById('analysesCount').textContent = analysesCount;
            document.getElementById('channelStats').style.display = 'block';
        }

        // Standard-Statistiken anzeigen (Fallback)
        function displayDefaultStats() {
            const analysesCount = calculateAnalysesCount();
            document.getElementById('analysesCount').textContent = analysesCount;
            document.getElementById('channelStats').style.display = 'block';
        }

        // Analysen-Zahl für die letzten 30 Tage berechnen
        function calculateAnalysesCount() {
            // Basierend auf deinen Trading-Patterns und Marktaktivität
            const baseCount = 45; // Basis: 1-2 Analysen pro Tag
            const marketVolatility = getMarketVolatility();
            const timeOfDay = new Date().getHours();
            
            // Mehr Analysen bei hoher Volatilität
            let volatilityMultiplier = 1;
            if (marketVolatility === 'high') volatilityMultiplier = 1.3;
            if (marketVolatility === 'medium') volatilityMultiplier = 1.1;
            
            // Mehr Analysen während Handelszeiten
            let timeMultiplier = 1;
            if (timeOfDay >= 8 && timeOfDay <= 18) timeMultiplier = 1.2;
            
            const totalAnalyses = Math.round(baseCount * volatilityMultiplier * timeMultiplier);
            return totalAnalyses;
        }

        // Marktvolatilität bestimmen (vereinfacht)
        function getMarketVolatility() {
            // Hier könnte später echte Marktdaten verwendet werden
            const hour = new Date().getHours();
            
            // Höhere Volatilität während US-Handelszeiten
            if (hour >= 14 && hour <= 22) return 'high';
            if (hour >= 8 && hour <= 16) return 'medium';
            return 'low';
        }

        // Telegram-Content Status prüfen und laden
        function ensureTelegramContentLoaded() {
            const telegramContent = document.getElementById('telegram');
            const channelStats = document.getElementById('channelStats');
            
            if (telegramContent && telegramContent.classList.contains('active')) {
                if (!channelStats || channelStats.style.display === 'none') {
                    console.log('Telegram-Content wird nachgeladen...');
                    loadTelegramChannelInfo();
                }
            }
        }

        // Periodisch prüfen, ob Telegram-Content geladen ist
        setInterval(ensureTelegramContentLoaded, 2000);

        // ===== FIREBASE KONFIGURATION =====
        
        // Firebase-Konfiguration
        const firebaseConfig = {
            apiKey: "AIzaSyBzJE3BFmHepIKe7aDr4iWylasMGll30Kw",
            authDomain: "sharkzcrib.firebaseapp.com",
            databaseURL: "https://sharkzcrib-default-rtdb.firebaseio.com",
            projectId: "sharkzcrib",
            storageBucket: "sharkzcrib.firebasestorage.app",
            messagingSenderId: "1024765182316",
            appId: "1:1024765182316:web:2e25a97ef49c3d29c63349"
        };

        // Firebase initialisieren
        let firebaseApp, firestore, auth;
        let isFirebaseReady = false;

        // Firebase Setup
        function initializeFirebase() {
            try {
                firebaseApp = firebase.initializeApp(firebaseConfig);
                firestore = firebase.firestore();
                auth = firebase.auth();
                isFirebaseReady = true;
                console.log('✅ Firebase erfolgreich initialisiert');
                
                // Status im Admin-Panel aktualisieren
                updateFirebaseStatus();
                
                // Benutzerdaten aus Firestore laden
                loadUsersFromFirestore();
            } catch (error) {
                console.error('❌ Firebase Initialisierung fehlgeschlagen:', error);
                // Fallback: Lokale Daten verwenden
                loadLocalUsers();
            }
        }

        // Firebase-Status im Admin-Panel aktualisieren
        function updateFirebaseStatus() {
            const firebaseStatus = document.getElementById('firebaseStatus');
            const syncBtn = document.getElementById('syncBtn');
            
            if (firebaseStatus) {
                if (isFirebaseReady) {
                    firebaseStatus.textContent = '✅ Cloud verbunden';
                    firebaseStatus.style.color = '#00ff88';
                    if (syncBtn) syncBtn.style.display = 'inline-block';
                } else {
                    firebaseStatus.textContent = '🌐 Offline';
                    firebaseStatus.style.color = '#cccccc';
                    if (syncBtn) syncBtn.style.display = 'none';
                }
            }
        }

        // ===== SESSION-MANAGEMENT =====
        
        // Session-Timeout starten
        function startSessionTimeout() {
            if (!currentUser) return;
            
            // Bestehenden Timeout stoppen
            stopSessionTimeout();
            
            // Neuen Timeout setzen
            sessionTimeout = setTimeout(() => {
                logout('timeout');
            }, SESSION_TIMEOUT_MINUTES * 60 * 1000);
            
            console.log(`Session-Timeout gestartet: ${SESSION_TIMEOUT_MINUTES} Minuten`);
        }
        
        // Session-Timeout stoppen
        function stopSessionTimeout() {
            if (sessionTimeout) {
                clearTimeout(sessionTimeout);
                sessionTimeout = null;
                console.log('Session-Timeout gestoppt');
            }
        }
        
        // Benutzeraktivität registrieren
        function updateUserActivity() {
            if (currentUser) {
                lastActivity = Date.now();
                console.log('Benutzeraktivität registriert:', new Date().toLocaleString());
            }
        }
        
        // Session-Status prüfen
        function checkSessionStatus() {
            if (!currentUser) return;
            
            const now = Date.now();
            const timeSinceLastActivity = now - lastActivity;
            const timeoutMs = SESSION_TIMEOUT_MINUTES * 60 * 1000;
            
            // Warnung 5 Minuten vor Timeout
            if (timeSinceLastActivity > (timeoutMs - 300000) && timeSinceLastActivity < timeoutMs) {
                showSessionWarning();
            }
            
            // Timeout wenn überschritten
            if (timeSinceLastActivity >= timeoutMs) {
                logout('timeout');
            }
        }
        
        // Session-Warnung anzeigen
        function showSessionWarning() {
            // Prüfen ob Warnung bereits angezeigt wird
            if (document.getElementById('sessionWarning')) return;
            
            const warning = document.createElement('div');
            warning.id = 'sessionWarning';
            warning.innerHTML = `
                <div style="
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: linear-gradient(135deg, rgba(255, 165, 2, 0.95), rgba(255, 107, 53, 0.95));
                    color: white;
                    padding: 20px 25px;
                    border-radius: 15px;
                    box-shadow: 0 8px 30px rgba(255, 165, 2, 0.4);
                    z-index: 10000;
                    animation: slideInRight 0.3s ease-out;
                    max-width: 320px;
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    backdrop-filter: blur(10px);
                ">
                    <div style="font-weight: bold; margin-bottom: 8px; font-size: 16px;">⚠️ Session läuft ab</div>
                    <div style="font-size: 14px; line-height: 1.4; margin-bottom: 15px;">Ihre Session läuft in 5 Minuten ab. Klicken Sie irgendwo, um aktiv zu bleiben.</div>
                    <button onclick="extendSession()" style="
                        background: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
                        border: 1px solid rgba(255, 255, 255, 0.3);
                        color: white;
                        padding: 10px 20px;
                        border-radius: 8px;
                        cursor: pointer;
                        font-size: 13px;
                        font-weight: 500;
                        transition: all 0.3s ease;
                        width: 100%;
                    " onmouseover="this.style.background='linear-gradient(135deg, rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0.2))'" onmouseout="this.style.background='linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1))'">Session verlängern</button>
                </div>
            `;
            
            document.body.appendChild(warning);
            
            // Warnung nach 15 Sekunden automatisch ausblenden
            setTimeout(() => {
                if (warning.parentNode) {
                    warning.parentNode.removeChild(warning);
                }
            }, 15000);
        }
        
        // Session verlängern
        function extendSession() {
            updateUserActivity();
            startSessionTimeout();
            
            // Warnung entfernen
            const warning = document.getElementById('sessionWarning');
            if (warning && warning.parentNode) {
                warning.parentNode.removeChild(warning);
            }
            
            // Erfolgsmeldung anzeigen
            showMessage('success', 'Session verlängert!', 'login');
        }
        
        // Event Listener für Benutzeraktivität
        function setupActivityListeners() {
            const activityEvents = ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart', 'click'];
            
            activityEvents.forEach(event => {
                document.addEventListener(event, updateUserActivity, true);
            });
            
            // Regelmäßige Session-Prüfung
            setInterval(checkSessionStatus, ACTIVITY_CHECK_INTERVAL);
        }
        
        // Page Visibility API für Tab-Wechsel
        function setupPageVisibilityListener() {
            document.addEventListener('visibilitychange', () => {
                if (document.hidden && currentUser) {
                    console.log('Tab/Seite verlassen - Session wird beibehalten');
                } else if (!document.hidden && currentUser) {
                    console.log('Tab/Seite wieder aktiv - Session wird fortgesetzt');
                    updateUserActivity();
                }
            });
        }
        
        // Beforeunload Event für Seiten-Schließen
        function setupBeforeUnloadListener() {
            window.addEventListener('beforeunload', (event) => {
                if (currentUser) {
                    // Session beim Schließen löschen
                    localStorage.removeItem('currentUser');
                    localStorage.removeItem('sessionStartTime');
                    console.log('Seite wird geschlossen - Session gelöscht');
                }
            });
            
            // Zusätzlich: Pagehide Event für bessere Browser-Kompatibilität
            window.addEventListener('pagehide', (event) => {
                if (currentUser) {
                    localStorage.removeItem('currentUser');
                    localStorage.removeItem('sessionStartTime');
                    console.log('Seite wird verlassen - Session gelöscht');
                }
            });
            
            // Unload Event als Fallback
            window.addEventListener('unload', (event) => {
                if (currentUser) {
                    localStorage.removeItem('currentUser');
                    localStorage.removeItem('sessionStartTime');
                    console.log('Seite wird entladen - Session gelöscht');
                }
            });
        }

        // ===== AUTHENTIFIZIERUNGSSYSTEM =====
        
        // Standard-Benutzerdaten (immer verfügbar)
        const DEFAULT_USERS = [
            { username: 'demo', email: 'demo@sharkzcrib.com', password: 'demo123', role: 'user' },
            { username: 'admin', email: 'admin@sharkzcrib.com', password: 'admin123', role: 'admin' }
        ];

        // Benutzerdaten (Fallback für lokale Speicherung)
        let users = [...DEFAULT_USERS];

        // Aktueller Benutzer
        let currentUser = null;
        
        // Session-Management
        let sessionTimeout = null;
        let lastActivity = Date.now();
        const SESSION_TIMEOUT_MINUTES = 30; // 30 Minuten Inaktivität
        const ACTIVITY_CHECK_INTERVAL = 60000; // Alle 60 Sekunden prüfen

        // Modal-Funktionen
        function showAuthModal(type = 'login') {
            const modal = document.getElementById('authModal');
            const loginForm = document.getElementById('loginForm');
            const registerForm = document.getElementById('registerForm');
            
            if (type === 'login') {
                loginForm.style.display = 'block';
                registerForm.style.display = 'none';
            } else {
                loginForm.style.display = 'none';
                registerForm.style.display = 'block';
            }
            
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function hideAuthModal() {
            const modal = document.getElementById('authModal');
            modal.classList.remove('active');
            document.body.style.overflow = 'auto';
            
            // Formulare zurücksetzen
            document.getElementById('loginFormElement').reset();
            document.getElementById('registerFormElement').reset();
            hideMessages();
        }

        function showMessage(type, message, formType) {
            let errorElement, successElement;
            
            if (formType === 'admin') {
                errorElement = document.getElementById('adminError');
                successElement = document.getElementById('adminSuccess');
            } else {
                errorElement = document.getElementById(formType + 'Error');
                successElement = document.getElementById(formType + 'Success');
            }
            
            if (!errorElement || !successElement) return;
            
            hideMessages(formType);
            
            if (type === 'error') {
                errorElement.textContent = message;
                errorElement.style.display = 'block';
            } else {
                successElement.textContent = message;
                successElement.style.display = 'block';
            }
        }

        function hideMessages(formType = null) {
            if (formType === 'admin') {
                const adminError = document.getElementById('adminError');
                const adminSuccess = document.getElementById('adminSuccess');
                if (adminError) adminError.style.display = 'none';
                if (adminSuccess) adminSuccess.style.display = 'none';
            } else if (formType) {
                const errorElement = document.getElementById(formType + 'Error');
                const successElement = document.getElementById(formType + 'Success');
                if (errorElement) errorElement.style.display = 'none';
                if (successElement) successElement.style.display = 'none';
            } else {
                document.querySelectorAll('.auth-error, .auth-success').forEach(el => {
                    el.style.display = 'none';
                });
            }
        }

        // Authentifizierungsfunktionen
        async function login(username, password) {
            console.log('=== LOGIN DEBUG ===');
            console.log('Eingegebene Daten:', { username, password });
            
            // Sicherstellen dass Admin-Daten verfügbar sind
            ensureAdminUsers();
            
            console.log('Verfügbare Benutzer:', users);
            console.log('Benutzeranzahl:', users.length);
            
            const user = users.find(u => u.username === username && u.password === password);
            console.log('Gefundener Benutzer:', user);
            
            if (user) {
                currentUser = user;
                
                // Last login aktualisieren
                user.last_login = new Date().toISOString().split('T')[0];
                
                // Lokale Speicherung
                saveUsersWithTimestamp();
                localStorage.setItem('currentUser', JSON.stringify(user));
                localStorage.setItem('sessionStartTime', Date.now().toString());
                
                // In Firestore aktualisieren (falls verfügbar)
                if (isFirebaseReady) {
                    await saveUserToFirestore(user);
                }
                
                // Session-Timeout starten
                startSessionTimeout();
                
                updateUIAfterAuth();
                hideAuthModal();
                showMessage('success', 'Erfolgreich angemeldet!', 'login');
                return true;
            } else {
                showMessage('error', 'Ungültige Anmeldedaten!', 'login');
                return false;
            }
        }

        async function register(username, email, password) {
            // Prüfen ob Benutzername bereits existiert
            if (users.find(u => u.username === username)) {
                showMessage('error', 'Benutzername bereits vergeben!', 'register');
                return false;
            }
            
            // Prüfen ob E-Mail bereits existiert
            if (users.find(u => u.email === email)) {
                showMessage('error', 'E-Mail bereits registriert!', 'register');
                return false;
            }
            
            // Neuen Benutzer erstellen
            const newUser = {
                username: username,
                email: email,
                password: password,
                role: 'user',
                created_date: new Date().toISOString().split('T')[0],
                last_login: new Date().toISOString().split('T')[0],
                status: 'active'
            };
            
            users.push(newUser);
            
            // Lokale Speicherung
            saveUsersWithTimestamp();
            localStorage.setItem('users', JSON.stringify(users));
            
            // In Firestore speichern (falls verfügbar)
            if (isFirebaseReady) {
                const success = await saveUserToFirestore(newUser);
                if (success) {
                    showMessage('success', 'Registrierung erfolgreich! Benutzer in der Cloud gespeichert.', 'register');
                } else {
                    showMessage('success', 'Registrierung erfolgreich! (Nur lokal gespeichert)', 'register');
                }
            } else {
                showMessage('success', 'Registrierung erfolgreich! Sie können sich jetzt anmelden.', 'register');
            }
            
            // Nach 2 Sekunden zum Login wechseln
            setTimeout(() => {
                document.getElementById('showLogin').click();
            }, 2000);
            
            return true;
        }

        function logout(reason = 'manual') {
            currentUser = null;
            localStorage.removeItem('currentUser');
            localStorage.removeItem('sessionStartTime');
            
            // Session-Timeout stoppen
            stopSessionTimeout();
            
            updateUIAfterAuth();
            
            // Unterschiedliche Nachrichten je nach Grund
            if (reason === 'timeout') {
                showMessage('error', 'Session abgelaufen! Bitte melden Sie sich erneut an.', 'login');
            } else if (reason === 'page_close') {
                // Keine Nachricht beim Schließen der Seite
            } else {
                showMessage('success', 'Erfolgreich abgemeldet!', 'login');
            }
        }

        function updateUIAfterAuth() {
            const analysisTab = document.getElementById('analysisTab');
            const accountBtn = document.getElementById('accountBtn');
            const accountDropdown = document.getElementById('accountDropdown');
            const adminItem = document.getElementById('adminItem');
            
            if (currentUser) {
                // Konto-Button mit Benutzernamen aktualisieren
                accountBtn.innerHTML = `
                    <span class="btn-icon">👤</span>
                    <span class="btn-text">${currentUser.username}</span>
                `;
                
                // Admin-Item für Admin-Benutzer anzeigen
                if (currentUser.role === 'admin') {
                    adminItem.style.display = 'flex';
                } else {
                    adminItem.style.display = 'none';
                }
                
                // Blur-Overlay ausblenden
                hideAnalysisBlurOverlay();
            } else {
                // Konto-Button auf Standard zurücksetzen
                accountBtn.innerHTML = `
                    <span class="btn-icon">👤</span>
                    <span class="btn-text">Konto</span>
                `;
                
                // Dropdown schließen
                accountDropdown.classList.remove('active');
                
                // Wenn Analysis-Tab aktiv ist, Blur-Overlay anzeigen
                if (analysisTab.classList.contains('active')) {
                    showAnalysisBlurOverlay();
                }
            }
        }

        // Event Listener für Authentifizierung
        function initializeAuth() {
            // Konto Button - Toggle Dropdown oder Login Modal
            document.getElementById('accountBtn').addEventListener('click', function(e) {
                e.stopPropagation();
                if (currentUser) {
                    // Benutzer ist angemeldet - Dropdown toggle
                    const dropdown = document.getElementById('accountDropdown');
                    dropdown.classList.toggle('active');
                } else {
                    // Benutzer ist nicht angemeldet - Login Modal öffnen
                    showAuthModal('login');
                }
            });

            // Dropdown Items Event Listener
            document.getElementById('profileItem').addEventListener('click', function() {
                // TODO: Profil bearbeiten implementieren
                console.log('Profil bearbeiten geklickt');
                document.getElementById('accountDropdown').classList.remove('active');
            });

            document.getElementById('adminItem').addEventListener('click', function() {
                showAdminPanel();
                document.getElementById('accountDropdown').classList.remove('active');
            });

            document.getElementById('logoutItem').addEventListener('click', function() {
                logout();
                document.getElementById('accountDropdown').classList.remove('active');
            });

            // Dropdown schließen wenn außerhalb geklickt wird
            document.addEventListener('click', function(e) {
                const dropdown = document.getElementById('accountDropdown');
                const accountBtn = document.getElementById('accountBtn');
                
                if (!dropdown.contains(e.target) && !accountBtn.contains(e.target)) {
                    dropdown.classList.remove('active');
                }
            });

            // Blur Login Button
            document.getElementById('blurLoginBtn').addEventListener('click', function() {
                showAuthModal('login');
            });

            // Login Form
            document.getElementById('loginFormElement').addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('loginUsername').value;
                const password = document.getElementById('loginPassword').value;
                
                if (login(username, password)) {
                    // Erfolgreich angemeldet
                }
            });

            // Register Form
            document.getElementById('registerFormElement').addEventListener('submit', function(e) {
                e.preventDefault();
                const username = document.getElementById('registerUsername').value;
                const email = document.getElementById('registerEmail').value;
                const password = document.getElementById('registerPassword').value;
                const passwordConfirm = document.getElementById('registerPasswordConfirm').value;
                
                if (password !== passwordConfirm) {
                    showMessage('error', 'Passwort muss mindestens 6 Zeichen lang sein!', 'register');
                    return;
                }
                
                register(username, email, password);
            });

            // Form Toggle
            document.getElementById('showRegister').addEventListener('click', function() {
                document.getElementById('loginForm').style.display = 'none';
                document.getElementById('registerForm').style.display = 'block';
                hideMessages();
            });

            document.getElementById('showLogin').addEventListener('click', function() {
                document.getElementById('loginForm').style.display = 'block';
                document.getElementById('registerForm').style.display = 'none';
                hideMessages();
            });

            // Modal schließen
            document.getElementById('closeModal').addEventListener('click', hideAuthModal);
            document.getElementById('authModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    hideAuthModal();
                }
            });

            // Admin Panel
            document.getElementById('closeAdminModal').addEventListener('click', hideAdminPanel);
            document.getElementById('adminModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    hideAdminPanel();
                }
            });

            // ESC-Taste zum Schließen
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    hideAuthModal();
                    hideAdminPanel();
                }
            });
        }

        // Blur-Overlay Funktionen
        function showAnalysisBlurOverlay() {
            const overlay = document.getElementById('analysisBlurOverlay');
            if (overlay) {
                overlay.classList.add('active');
            }
        }

        function hideAnalysisBlurOverlay() {
            const overlay = document.getElementById('analysisBlurOverlay');
            if (overlay) {
                overlay.classList.remove('active');
            }
        }

        // Admin-Panel Funktionen
        function showAdminPanel() {
            const adminModal = document.getElementById('adminModal');
            if (adminModal) {
                adminModal.classList.add('active');
                updateAdminUserList();
            }
        }

        function hideAdminPanel() {
            const adminModal = document.getElementById('adminModal');
            if (adminModal) {
                adminModal.classList.remove('active');
            }
        }

        function updateAdminUserList() {
            const userList = document.getElementById('adminUserList');
            const userCount = document.getElementById('userCount');
            if (!userList) return;

            // Benutzeranzahl aktualisieren
            if (userCount) {
                userCount.textContent = users.length;
            }

            userList.innerHTML = users.map((user, index) => `
                <div class="admin-user-item">
                    <div class="user-info">
                        <span class="username">${user.username}</span>
                        <span class="email">${user.email}</span>
                        <span class="role">${user.role}</span>
                        <span class="status">${user.status || 'active'}</span>
                    </div>
                    <div class="user-actions">
                        <button class="delete-user-btn" onclick="deleteUser(${index})">🗑️</button>
                    </div>
                </div>
            `).join('');
        }

        function deleteUser(index) {
            if (confirm('Benutzer wirklich löschen?')) {
                users.splice(index, 1);
                localStorage.setItem('users', JSON.stringify(users));
                updateAdminUserList();
                showMessage('success', 'Benutzer gelöscht!', 'admin');
            }
        }

        function exportCSV() {
            const csvHeader = 'username,email,password,role,created_date,last_login,status\n';
            const csvData = users.map(user => {
                return `${user.username},${user.email},${user.password},${user.role},${user.created_date || ''},${user.last_login || ''},${user.status || 'active'}`;
            }).join('\n');
            
            const fullCSV = csvHeader + csvData;
            const blob = new Blob([fullCSV], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            
            if (link.download !== undefined) {
                const url = URL.createObjectURL(blob);
                link.setAttribute('href', url);
                link.setAttribute('download', 'users_updated.csv');
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
            
            showMessage('success', 'CSV-Datei heruntergeladen!', 'admin');
        }

        // Firebase Console öffnen
        function openFirebaseConsole() {
            if (firebaseConfig && firebaseConfig.projectId) {
                const consoleUrl = `https://console.firebase.google.com/project/${firebaseConfig.projectId}/firestore/data`;
                window.open(consoleUrl, '_blank');
                showMessage('success', 'Firebase Console wird geöffnet...', 'admin');
            } else {
                // Fallback: Generische Firebase Console öffnen
                const consoleUrl = 'https://console.firebase.google.com/';
                window.open(consoleUrl, '_blank');
                showMessage('success', 'Firebase Console wird geöffnet...', 'admin');
            }
        }

        // Benutzerliste aktualisieren
        function refreshUserList() {
            if (isFirebaseReady) {
                loadUsersFromFirestore();
                showMessage('success', 'Benutzerliste von der Cloud aktualisiert!', 'admin');
            } else {
                // Lokale Daten neu laden
                loadLocalUsers();
                updateAdminUserList();
                showMessage('success', 'Lokale Benutzerliste aktualisiert!', 'admin');
            }
        }

        // Datenbank-Statistiken anzeigen
        function showDatabaseStats() {
            const stats = {
                totalUsers: users.length,
                adminUsers: users.filter(u => u.role === 'admin').length,
                regularUsers: users.filter(u => u.role === 'user').length,
                activeUsers: users.filter(u => u.status === 'active').length,
                firebaseStatus: isFirebaseReady ? 'Verbunden' : 'Offline',
                lastSync: new Date().toLocaleString('de-DE')
            };

            const statsMessage = `
📊 Datenbank-Statistiken:
• Gesamtbenutzer: ${stats.totalUsers}
• Administratoren: ${stats.adminUsers}
• Reguläre Benutzer: ${stats.regularUsers}
• Aktive Benutzer: ${stats.activeUsers}
• Firebase-Status: ${stats.firebaseStatus}
• Letzte Synchronisation: ${stats.lastSync}
            `;

            alert(statsMessage);
        }

        // ===== FIRESTORE FUNKTIONEN =====
        
        // Benutzer aus Firestore laden
        async function loadUsersFromFirestore() {
            if (!isFirebaseReady) return;
            
            try {
                const usersSnapshot = await firestore.collection('users').get();
                const firestoreUsers = [];
                
                usersSnapshot.forEach(doc => {
                    const userData = doc.data();
                    firestoreUsers.push({
                        id: doc.id,
                        ...userData
                    });
                });
                
                console.log('✅ Benutzer aus Firestore geladen:', firestoreUsers.length);
                
                // Firestore-Benutzer mit lokalen DEFAULT_USERS kombinieren
                // WICHTIG: Firestore-Benutzer haben Vorrang vor lokalen
                const combinedUsers = [...DEFAULT_USERS];
                
                // Firestore-Benutzer hinzufügen/aktualisieren
                firestoreUsers.forEach(firestoreUser => {
                    const existingIndex = combinedUsers.findIndex(u => u.username === firestoreUser.username);
                    if (existingIndex >= 0) {
                        // Lokalen Benutzer mit Firestore-Daten aktualisieren
                        combinedUsers[existingIndex] = { ...firestoreUser };
                    } else {
                        // Neuen Benutzer hinzufügen
                        combinedUsers.push(firestoreUser);
                    }
                });
                
                // Globale users-Liste aktualisieren
                users = combinedUsers;
                
                // Lokalen Cache aktualisieren
                saveUsersWithTimestamp();
                
                // UI aktualisieren
                if (currentUser) {
                    updateUIAfterAuth();
                }
                
                console.log('✅ Kombinierte Benutzerliste:', users.length, 'Benutzer');
            } catch (error) {
                console.error('❌ Fehler beim Laden aus Firestore:', error);
                // Fallback: Lokale Daten laden
                loadLocalUsers();
            }
        }

        // Lokale Benutzer laden (Fallback)
        function loadLocalUsers() {
            console.log('🔄 Lade lokale Benutzerdaten...');
            
            // Zuerst versuchen, gespeicherte Daten zu laden
            if (loadUsersWithTimestamp()) {
                console.log('✅ Lokale Benutzerdaten geladen:', users.length, 'Benutzer');
                return;
            }
            
            // Fallback: CSV-Daten importieren
            importCSVData();
            
            // Sicherstellen dass mindestens DEFAULT_USERS verfügbar sind
            if (users.length === 0) {
                users = [...DEFAULT_USERS];
                console.log('⚠️ Verwende DEFAULT_USERS als Fallback');
            }
        }

        // Benutzer in Firestore speichern
        async function saveUserToFirestore(user) {
            if (!isFirebaseReady) return false;
            
            try {
                if (user.id) {
                    // Bestehenden Benutzer aktualisieren
                    await firestore.collection('users').doc(user.id).update({
                        username: user.username,
                        email: user.email,
                        password: user.password,
                        role: user.role,
                        last_login: user.last_login,
                        status: user.status,
                        updated_at: firebase.firestore.FieldValue.serverTimestamp()
                    });
                } else {
                    // Neuen Benutzer erstellen
                    const docRef = await firestore.collection('users').add({
                        username: user.username,
                        email: user.email,
                        password: user.password,
                        role: user.role,
                        created_date: user.created_date,
                        last_login: user.last_login,
                        status: user.status,
                        created_at: firebase.firestore.FieldValue.serverTimestamp(),
                        updated_at: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    user.id = docRef.id;
                }
                
                console.log('✅ Benutzer in Firestore gespeichert:', user.username);
                return true;
            } catch (error) {
                console.error('❌ Fehler beim Speichern in Firestore:', error);
                return false;
            }
        }

        // Alle Benutzer in Firestore synchronisieren
        async function syncAllUsersToFirestore() {
            if (isFirebaseReady) {
                try {
                    for (const user of users) {
                        await saveUserToFirestore(user);
                    }
                    console.log('✅ Alle Benutzer mit Firestore synchronisiert');
                    showMessage('success', 'Alle Benutzer mit der Cloud synchronisiert!', 'admin');
                    
                    // Nach der Synchronisation: Benutzer aus Firestore neu laden
                    // um sicherzustellen, dass alle IDs korrekt gesetzt sind
                    await loadUsersFromFirestore();
                    updateAdminUserList();
                    
                    return true;
                } catch (error) {
                    console.error('❌ Fehler bei der Synchronisation:', error);
                    showMessage('error', 'Fehler bei der Cloud-Synchronisation!', 'admin');
                    return false;
                }
            } else {
                // Fallback: Lokale Daten neu laden
                loadLocalUsers();
                updateAdminUserList();
                showMessage('success', 'Lokale Benutzerliste aktualisiert!', 'admin');
                return true;
            }
        }

        // CSV-Datei importieren (beim Laden der Seite)
        function importCSVData() {
            // Versuche, die users.csv Datei zu laden
            fetch('users.csv')
                .then(response => response.text())
                .then(csvData => {
                    const lines = csvData.split('\n');
                    const headers = lines[0].split(',');
                    
                    // CSV-Daten parsen und zu users Array hinzufügen
                    for (let i = 1; i < lines.length; i++) {
                        if (lines[i].trim()) {
                            const values = lines[i].split(',');
                            const user = {
                                username: values[0],
                                email: values[1],
                                password: values[2],
                                role: values[3],
                                created_date: values[4],
                                last_login: values[5],
                                status: values[6]
                            };
                            
                            // Prüfen ob Benutzer bereits existiert
                            if (!users.find(u => u.username === user.username)) {
                                users.push(user);
                            }
                        }
                    }
                    
                    // Aktualisierte Benutzerliste speichern
                    localStorage.setItem('users', JSON.stringify(users));
                    console.log('CSV-Daten erfolgreich importiert:', users.length, 'Benutzer geladen');
                    
                    // Mit Firestore synchronisieren (falls verfügbar)
                    if (isFirebaseReady) {
                        syncAllUsersToFirestore();
                    }
                })
                .catch(error => {
                    console.log('CSV-Datei nicht gefunden oder Fehler beim Laden:', error);
                });
        }

        // Erweiterte Datenspeicherung mit Timestamp
        function saveUsersWithTimestamp() {
            const timestamp = new Date().toISOString();
            const dataToSave = {
                users: users,
                lastUpdated: timestamp,
                version: '1.0'
            };
            localStorage.setItem('usersData', JSON.stringify(dataToSave));
        }

        // Benutzerdaten mit Timestamp laden
        function loadUsersWithTimestamp() {
            const savedData = localStorage.getItem('usersData');
            if (savedData) {
                try {
                    const data = JSON.parse(savedData);
                    if (data.users && Array.isArray(data.users)) {
                        users = data.users;
                        console.log('Benutzerdaten geladen:', users.length, 'Benutzer, zuletzt aktualisiert:', data.lastUpdated);
                        return true;
                    }
                } catch (error) {
                    console.error('Fehler beim Laden der Benutzerdaten:', error);
                }
            }
            return false;
        }

        // Benutzerdaten beim Laden der Seite wiederherstellen
        function restoreUserSession() {
            const savedUser = localStorage.getItem('currentUser');
            const sessionStartTime = localStorage.getItem('sessionStartTime');
            
            console.log('=== RESTORE SESSION DEBUG ===');
            console.log('Aktuelle users-Liste:', users);
            
            // WICHTIG: users-Liste wird bereits von loadUsersFromFirestore() oder loadLocalUsers() gesetzt
            // Hier nur die Session wiederherstellen, nicht die Benutzerliste überschreiben
            
            // Sicherheitscheck: Falls users immer noch leer ist, DEFAULT_USERS verwenden
            if (users.length === 0) {
                console.warn('Users-Liste ist leer! Verwende DEFAULT_USERS als Fallback.');
                users = [...DEFAULT_USERS];
            }
            
            if (savedUser && sessionStartTime) {
                try {
                    const sessionAge = Date.now() - parseInt(sessionStartTime);
                    const maxSessionAge = SESSION_TIMEOUT_MINUTES * 60 * 1000; // 30 Minuten in Millisekunden
                    
                    // Nur wiederherstellen wenn Session noch nicht abgelaufen ist
                    if (sessionAge < maxSessionAge) {
                        currentUser = JSON.parse(savedUser);
                        updateUIAfterAuth();
                        startSessionTimeout();
                        console.log('Session wiederhergestellt für:', currentUser.username);
                    } else {
                        // Session ist abgelaufen - löschen
                        localStorage.removeItem('currentUser');
                        localStorage.removeItem('sessionStartTime');
                        console.log('Session ist abgelaufen - Anmeldung erforderlich');
                    }
                } catch (error) {
                    console.error('Fehler beim Wiederherstellen der Session:', error);
                    localStorage.removeItem('currentUser');
                    localStorage.removeItem('sessionStartTime');
                }
            }
            
            console.log('Finale users-Liste:', users);
        }

        // Sicherstellen dass Admin-Daten verfügbar sind
        function ensureAdminUsers() {
            console.log('=== ENSURE ADMIN USERS ===');
            console.log('Aktuelle users-Liste:', users);
            
            // Prüfen ob Admin-Daten vorhanden sind
            const adminExists = users.some(u => u.username === 'admin');
            const demoExists = users.some(u => u.username === 'demo');
            
            console.log('Admin vorhanden:', adminExists);
            console.log('Demo vorhanden:', demoExists);
            
            if (!adminExists || !demoExists) {
                console.warn('Admin oder Demo fehlt! Füge fehlende DEFAULT_USERS hinzu.');
                
                // Nur fehlende Benutzer hinzufügen, bestehende nicht überschreiben
                if (!adminExists) {
                    const adminUser = DEFAULT_USERS.find(u => u.username === 'admin');
                    if (adminUser) users.push(adminUser);
                }
                if (!demoExists) {
                    const demoUser = DEFAULT_USERS.find(u => u.username === 'demo');
                    if (demoUser) users.push(demoUser);
                }
                
                console.log('Users nach Korrektur:', users);
            }
        }

        // Debug-Funktion: Benutzerliste und Speicherstatus anzeigen
        function showUserList() {
            console.log('=== BENUTZERDATEN STATUS ===');
            console.log('Aktuelle Benutzerliste:', users);
            console.log('Anzahl Benutzer:', users.length);
            
            // Speicherstatus anzeigen
            const savedData = localStorage.getItem('usersData');
            if (savedData) {
                try {
                    const data = JSON.parse(savedData);
                    console.log('Speicherstatus:', {
                        lastUpdated: data.lastUpdated,
                        version: data.version,
                        localStorageSize: (savedData.length / 1024).toFixed(2) + ' KB'
                    });
                } catch (error) {
                    console.error('Fehler beim Parsen der Speicherdaten:', error);
                }
            }
            
            // Einzelne localStorage Items
            console.log('localStorage Items:', {
                users: localStorage.getItem('users') ? '✓' : '✗',
                currentUser: localStorage.getItem('currentUser') ? '✓' : '✗',
                usersData: localStorage.getItem('usersData') ? '✓' : '✗'
            });
        }

        // Authentifizierung initialisieren
        document.addEventListener('DOMContentLoaded', function() {
            initializeAuth();
            
            // Firebase initialisieren (lädt automatisch Benutzer aus Firestore)
            initializeFirebase();
            
            // Nach Firebase-Initialisierung: Session wiederherstellen
            // Firebase lädt die Benutzer asynchron, daher warten wir kurz
            setTimeout(() => {
                restoreUserSession();
                
                // Session-Management initialisieren
                setupActivityListeners();
                setupPageVisibilityListener();
                setupBeforeUnloadListener();
                
                // Debug: Benutzerliste nach 2 Sekunden anzeigen
                setTimeout(showUserList, 2000);
            }, 1000);
        });

        // Fazit basierend auf allen Indikatoren aktualisieren
        function updateSummary(rsi, macd, ma20, sentiment) {
            const liveInfo = document.getElementById('live-info');
            if (!liveInfo) return;

            const summaryElement = liveInfo.querySelector('.level-item.summary');
            if (!summaryElement) return;

            // Gesamtsentiment berechnen
            let bullishCount = 0;
            let bearishCount = 0;

            // RSI bewerten
            if (rsi < 30) bullishCount++; // Überverkauft = bullish für Korrektur
            else if (rsi > 70) bearishCount++; // Überkauft = bearish für Korrektur

            // MACD bewerten
            if (macd === 'bullish') bullishCount++;
            else if (macd === 'bearish') bearishCount++;

            // MA20 bewerten
            if (ma20 === 'support') bullishCount++;
            else if (ma20 === 'resistance') bearishCount++;

            // Sentiment bewerten
            if (sentiment === 'bullish') bullishCount++;
            else if (sentiment === 'bearish') bearishCount++;

            // Gesamtsentiment bestimmen
            let overallSentiment, overallColor, overallDescription;
            
            if (bullishCount > bearishCount) {
                overallSentiment = 'Bullish';
                overallColor = 'positive';
                overallDescription = `Technische Indikatoren zeigen einen starken Aufwärtstrend (${bullishCount} bullish vs ${bearishCount} bearish Signale). MACD über Signallinie bestätigt bullisches Momentum, RSI bei ${rsi.toFixed(1)} zeigt noch Raum für weitere Anstiege, und 20 MA als Unterstützung bestätigt die bullische Struktur. Alle Signale deuten auf eine Fortsetzung des Aufwärtstrends hin.`;
            } else if (bearishCount > bullishCount) {
                overallSentiment = 'Bearish';
                overallColor = 'negative';
                overallDescription = `Technische Indikatoren zeigen einen Abwärtstrend (${bearishCount} bearish vs ${bullishCount} bullish Signale). MACD unter Signallinie bestätigt bearisches Momentum, RSI bei ${rsi.toFixed(1)} zeigt mögliche Überkauft-Situation, und 20 MA als Widerstand bestätigt die bearische Struktur. Vorsicht vor weiteren Abwärtsbewegungen.`;
            } else {
                overallSentiment = 'Neutral';
                overallColor = 'neutral';
                overallDescription = `Technische Indikatoren zeigen gemischte Signale (${bullishCount} bullish vs ${bearishCount} bearish). Markt ist ausgewogen und zeigt keine klare Richtung. RSI bei ${rsi.toFixed(1)} im neutralen Bereich, MACD und 20 MA geben keine eindeutigen Signale. Abwarten und weitere Entwicklung beobachten.`;
            }

            // Fazit in der UI aktualisieren
            const valueElement = summaryElement.querySelector('.level-value');
            const descElement = summaryElement.querySelector('.level-description');
            
            if (valueElement) {
                valueElement.textContent = overallSentiment;
                valueElement.className = `level-value ${overallColor}`;
            }
            
            if (descElement) {
                descElement.textContent = overallDescription;
            }
        }
    </script>
</body>
</html>